(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{1382:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(1),l=a.n(c),o=a(19),s=a(9),u=a.n(s),i=a(331),m=(a(139),a(11)),d=a(67),p=a(32),f=(a(422),a(312));function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function b(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function h(e,t,a,n,r,c,l){try{var o=e[c](l),s=o.value}catch(e){return void a(e)}o.done?t(s):Promise.resolve(s).then(n,r)}function E(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var c=e.apply(t,a);function l(e){h(c,n,r,l,o,"next",e)}function o(e){h(c,n,r,l,o,"throw",e)}l(void 0)}))}}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var a=[],n=!0,r=!1,c=void 0;try{for(var l,o=e[Symbol.iterator]();!(n=(l=o.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(e){r=!0,c=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw c}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function y(e){var t=e.user,a=v(Object(n.useState)(e.location.state),1)[0],c=v(Object(n.useState)(!1),2),l=c[0],o=c[1],s=v(Object(n.useState)(!1),2),p=s[0],h=s[1],y=v(Object(n.useState)("Add"),2),x=y[0],k=y[1],N=v(Object(n.useState)([]),2),O=N[0],w=N[1],S=v(Object(n.useState)([]),2),j=S[0],P=S[1],C=v(Object(n.useState)([]),2),A=C[0],F=C[1],T=v(Object(n.useState)([]),2),R=T[0],z=T[1],_=v(Object(n.useState)({name:"",version:"",task:""}),2),D=_[0],I=_[1],B=v(Object(n.useState)({fieldName:"name",direction:"desc"}),1)[0],J=v(Object(n.useState)(5),2),G=J[0],L=J[1],W=v(Object(n.useState)(0),2),V=W[0],H=W[1],q=Object(m.F)(B,200),K=Object(m.F)(D,250);Object(n.useEffect)((function(){(function(){var e=E(regeneratorRuntime.mark((function e(){var n,r,c,l,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(f.b)(t,{group:a},q,G);case 3:return n=e.sent,r=[],n.forEach((function(e){r.includes(e.name)||r.push(e.name)})),c=[],e.prev=7,e.next=10,Object(f.b)(t,K,q,G);case 10:l=e.sent,o=[],l.forEach((function(e){o.includes(e)||r.includes(e.name)||e.user!==t.email||!1!==e.visibility?r.includes(e.name)&&c.push(e):o.push(e)})),w(c),P(o),h(!0),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(7),alert(e.t0);case 21:e.next=26;break;case 23:e.prev=23,e.t1=e.catch(0),alert(e.t1);case 26:case"end":return e.stop()}}),e,null,[[0,23],[7,18]])})));return function(){return e.apply(this,arguments)}})()()}),[K,q,a,G,t,A]);var M=[{displayText:"ModelName",fieldName:"name",inputType:"text",size:200},{displayText:"Version",fieldName:"version",inputType:"text",size:100},{displayText:"Task",fieldName:"task",inputType:"text",size:200}],X=M.map((function(e){return e.size})).reduce((function(e,t){return e+t}));function Q(e,t){I((function(a){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(a,!0).forEach((function(t){b(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},a,b({},e,t))}))}var U=function(e){var t=e.target.value;A.includes(t)?F(A.filter((function(e){return e!==t}))):A.push(t)},Y=function(){A.length<j.length?F(j.map((function(e){return e.name}))):F([])};function Z(){return $.apply(this,arguments)}function $(){return($=E(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=A.length){e.next=5;break}document.getElementById("message2").textContent="At least one model must be selected!",e.next=19;break;case 5:return e.prev=5,t={headers:{Authorization:"JWT ".concat(localStorage.getItem("access")),"Content-Type":"application/json",Accept:"application/json"}},(n=new FormData).append("groupName",a),n.append("models",JSON.stringify(A)),e.next=12,u.a.post("/api/investigator_add_models",n,t);case 12:!0===e.sent.data.Status?o(!0):alert("Error while adding models"),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),alert(e.t0);case 19:case"end":return e.stop()}}),e,null,[[5,16]])})))).apply(this,arguments)}var ee=function(e){var t=e.target.value;R.includes(t)?z(R.filter((function(e){return e!==t}))):R.push(t)},te=function(){R.length<O.length?z(O.map((function(e){return e.name}))):z([])};function ae(){return ne.apply(this,arguments)}function ne(){return(ne=E(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==R.length){e.next=5;break}document.getElementById("message2").textContent="At least one model must be selected!",e.next=19;break;case 5:return e.prev=5,t={headers:{Authorization:"JWT ".concat(localStorage.getItem("access")),"Content-Type":"application/json",Accept:"application/json"}},(n=new FormData).append("groupName",a),n.append("models",JSON.stringify(R)),e.next=12,u.a.post("/api/investigator_remove_models",n,t);case 12:!0===e.sent.data.Status?o(!0):alert("Error while removing models"),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),alert(e.t0);case 19:case"end":return e.stop()}}),e,null,[[5,16]])})))).apply(this,arguments)}return localStorage.getItem("Investigator_Authenticated")&&p?r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"content",style:{marginTop:"5px"}},r.a.createElement("h4",null,"Add or Remove?"),r.a.createElement("p",{className:"tooltiptext"},"Choose if you want to ",r.a.createElement("b",null,"remove")," or ",r.a.createElement("b",null,"add"),' models from group "',a,'".'),r.a.createElement("select",{className:"select",name:"choice",value:x,onChange:function(e){return k(e.target.value)},required:!0},r.a.createElement("option",{key:""}),["Add","Remove"].map((function(e){return r.a.createElement("option",{key:e},e)}))),"Add"===x?r.a.createElement(i.a,{className:"addGroup",onSubmit:Z,render:function(e){return r.a.createElement("form",{className:"addGroup",style:{maxWidth:650},onSubmit:e.onSubmit},r.a.createElement("fieldset",{className:"k-form-fieldset"},r.a.createElement("div",{className:"mb-3"},r.a.createElement("legend",{className:"k-form-legend",style:{marginBottom:"10px",marginTop:"5px",fontSize:"14px"}},r.a.createElement("b",null,"Share models:")),r.a.createElement("table",{className:"table"},r.a.createElement("colgroup",null,M.map((function(e,t){var a=e.size/X*100;return r.a.createElement("col",{key:t,style:{width:"".concat(a,"%"),textAlign:"center"}})}))),r.a.createElement("thead",{className:"table-head"},r.a.createElement("tr",{className:"filters"},r.a.createElement(m.y,{meta:M,values:D,onValueChange:Q,sortFieldName:"name",sortDirection:"asc"}),r.a.createElement("th",{style:{color:"black",paddingBottom:"15px",paddingLeft:"8px"},className:"text-left"},r.a.createElement("input",{type:"checkbox",checked:A.length===j.length,onChange:Y})))),r.a.createElement("tbody",{className:"table-body"},!j.length&&r.a.createElement("tr",{style:{backgroundColor:"#5F9EA0"}},r.a.createElement("td",{colSpan:M.length},r.a.createElement("div",null,"No matching results"))),j.map((function(e){var t=e.name,a=e.version,n=e.task;return r.a.createElement("tr",{style:{backgroundColor:"#5F9EA0"},key:t},r.a.createElement("td",{className:"text-center"},t),r.a.createElement("td",{className:"text-center"},a),r.a.createElement("td",{className:"text-center"},n),r.a.createElement("td",{style:{paddingLeft:"8px"}},r.a.createElement("input",{type:"checkbox",value:t,checked:A.includes(t),onChange:U})))})))),r.a.createElement(m.x,{currentPage:V,pageOptions:[5,10,15],nextPageFunc:function(){return H(V+1)},prevPageFunc:function(){return H(V-1)},onRowsPerPageChange:function(e){return L(e)},rowsPerPage:G,recordCount:j.length}),r.a.createElement("div",{className:"message",id:"message2",style:{color:"red"}}))),r.a.createElement("div",{className:"k-form-buttons"},r.a.createElement("button",{className:"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base",onClick:function(){return Z()}},"Add")))}}):"Remove"===x?r.a.createElement(i.a,{className:"addGroup",onSubmit:ae,render:function(e){return r.a.createElement("form",{className:"addGroup",style:{maxWidth:650},onSubmit:e.onSubmit},r.a.createElement("fieldset",{className:"k-form-fieldset"},r.a.createElement("div",{className:"mb-3"},r.a.createElement("legend",{className:"k-form-legend",style:{marginBottom:"10px",marginTop:"5px",fontSize:"14px"}},r.a.createElement("b",null,"Remove models:")),r.a.createElement("table",{className:"table"},r.a.createElement("colgroup",null,M.map((function(e,t){var a=e.size/X*100;return r.a.createElement("col",{key:t,style:{width:"".concat(a,"%"),textAlign:"center"}})}))),r.a.createElement("thead",{className:"table-head"},r.a.createElement("tr",{className:"filters"},r.a.createElement(m.y,{meta:M,values:D,onValueChange:Q,sortFieldName:"name",sortDirection:"asc"}),r.a.createElement("th",{style:{color:"black",paddingBottom:"15px",paddingLeft:"8px"},className:"text-left"},r.a.createElement("input",{type:"checkbox",checked:R.length===O.length,onChange:te})))),r.a.createElement("tbody",{className:"table-body"},!O.length&&r.a.createElement("tr",{style:{backgroundColor:"#5F9EA0"}},r.a.createElement("td",{colSpan:M.length},r.a.createElement("div",null,"No matching results"))),O.map((function(e){var t=e.name,a=e.version,n=e.task;return r.a.createElement("tr",{style:{backgroundColor:"#5F9EA0"},key:t},r.a.createElement("td",{className:"text-center"},t),r.a.createElement("td",{className:"text-center"},a),r.a.createElement("td",{className:"text-center"},n),r.a.createElement("td",{style:{paddingLeft:"8px"}},r.a.createElement("input",{type:"checkbox",value:t,checked:R.includes(t),onChange:ee})))})))),r.a.createElement(m.x,{currentPage:V,pageOptions:[5,10,15],nextPageFunc:function(){return H(V+1)},prevPageFunc:function(){return H(V-1)},onRowsPerPageChange:function(e){return L(e)},rowsPerPage:G,recordCount:j.length}),r.a.createElement("div",{className:"message",id:"message2",style:{color:"red"}}))),r.a.createElement("div",{className:"k-form-buttons"},r.a.createElement("button",{className:"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base",onClick:function(){return ae()}},"Remove")))}}):null,l?r.a.createElement(d.a,{to:"/view_models/"+a}):r.a.createElement(n.Fragment,null))):localStorage.getItem("HealthProfessional_Authenticated")?r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"content"},l?r.a.createElement(d.a,{to:"/group_details/".concat(e.match.params.name,"/").concat(t.email)}):r.a.createElement(n.Fragment,null))):null}u.a.defaults.xsrfHeaderName="X-CSRFTOKEN",u.a.defaults.xsrfCookieName="csrftoken",u.a.defaults.withCredentials=!0,y.propTypes={user:l.a.object};t.default=Object(o.b)((function(e){return{user:e.auth.user}}),{load_user:p.g})(y)}}]);
//# sourceMappingURL=11.bundle.565d8ad244ec623c48d2.js.map