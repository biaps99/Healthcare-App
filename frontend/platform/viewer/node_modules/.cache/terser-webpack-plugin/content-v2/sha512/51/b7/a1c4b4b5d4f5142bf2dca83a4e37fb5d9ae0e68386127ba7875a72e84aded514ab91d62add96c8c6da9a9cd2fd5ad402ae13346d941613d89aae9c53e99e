{"map":"{\"version\":3,\"sources\":[\"0.bundle.b0150f95c52dd1f3fc3b.js\"],\"names\":[\"window\",\"push\",\"1395\",\"module\",\"__webpack_exports__\",\"__webpack_require__\",\"es\",\"react\",\"react_default\",\"n\",\"prop_types\",\"prop_types_default\",\"classnames\",\"classnames_default\",\"src\",\"DICOMSR\",\"MODULE_TYPES\",\"ui_src\",\"moment\",\"moment_default\",\"dist_es\",\"App\",\"cornerstoneTools\",\"cornerstoneTools_default\",\"lodash_clonedeep\",\"lodash_clonedeep_default\",\"scrollToIndex\",\"toolImport\",\"a\",\"import\",\"setViewportSpecificData\",\"redux\",\"actions\",\"connectedComponents_ConnectedCineDialog\",\"Object\",\"state\",\"_state$viewports\",\"viewports\",\"cine\",\"viewportSpecificData\",\"activeViewportIndex\",\"activeEnabledElement\",\"runCommand\",\"activeViewportCineData\",\"isPlaying\",\"cineFrameRate\",\"dispatch\",\"dispatchSetViewportSpecificData\",\"viewportIndex\",\"data\",\"propsFromState\",\"propsFromDispatch\",\"ownProps\",\"onPlayPauseChanged\",\"onFrameRateChanged\",\"frameRate\",\"onClickNextButton\",\"stackData\",\"getToolState\",\"length\",\"_stackData$data$\",\"currentImageIdIndex\",\"imageIds\",\"onClickBackButton\",\"onClickSkipToStart\",\"onClickSkipToEnd\",\"lastIndex\",\"_OHIF$redux$actions\",\"setLayout\",\"setViewportActive\",\"connectedComponents_ConnectedLayoutButton\",\"currentLayout\",\"layout\",\"onChange\",\"selectedCell\",\"numRows\",\"row\",\"numColumns\",\"col\",\"numViewports\",\"i\",\"viewport\",\"plugin\",\"vtk\",\"onChangeFromDispatch\",\"AppContext\",\"_toConsumableArray\",\"arr\",\"Array\",\"isArray\",\"arr2\",\"_arrayWithoutHoles\",\"iter\",\"Symbol\",\"iterator\",\"prototype\",\"toString\",\"call\",\"from\",\"_iterableToArray\",\"TypeError\",\"_nonIterableSpread\",\"_typeof\",\"obj\",\"constructor\",\"_defineProperties\",\"target\",\"props\",\"descriptor\",\"enumerable\",\"configurable\",\"writable\",\"defineProperty\",\"key\",\"_getPrototypeOf\",\"o\",\"setPrototypeOf\",\"getPrototypeOf\",\"__proto__\",\"_assertThisInitialized\",\"self\",\"ReferenceError\",\"_setPrototypeOf\",\"p\",\"_defineProperty\",\"value\",\"ToolbarRow_ToolbarRow\",\"_Component\",\"ToolbarRow\",\"_this2\",\"instance\",\"Constructor\",\"_classCallCheck\",\"this\",\"dialog\",\"_this2$state\",\"dialogId\",\"activeButtons\",\"toolbarButtons\",\"find\",\"button\",\"options\",\"behavior\",\"dismiss\",\"id\",\"filter\",\"setState\",\"toolbarButtonDefinitions\",\"_getVisibleToolbarButtons\",\"seriesPerStudyCount\",\"_handleBuiltIn\",\"bind\",\"_onDerivedDisplaySetsLoadedAndCached\",\"updateButtonGroups\",\"protoProps\",\"staticProps\",\"subClass\",\"superClass\",\"create\",\"_inherits\",\"_this3\",\"panelModules\",\"modules\",\"PANEL\",\"buttonGroups\",\"left\",\"right\",\"forEach\",\"panelExtension\",\"panelModule\",\"defaultContexts\",\"defaultContext\",\"menuOptions\",\"menuOption\",\"contexts\",\"context\",\"hasActiveContext\",\"activeContexts\",\"some\",\"actx\",\"includes\",\"isDisabled\",\"studies\",\"activeViewport\",\"menuOptionEntry\",\"icon\",\"bottomLabel\",\"label\",\"badgeNumber\",\"stateEvent\",\"document\",\"addEventListener\",\"removeEventListener\",\"prevProps\",\"activeContextsChanged\",\"prevStudies\",\"prevActiveViewport\",\"shouldUpdate\",\"series\",\"closeCineDialogIfNotApplicable\",\"_this4\",\"buttonComponents\",\"_getButtonComponents\",\"onPressRight\",\"side\",\"handleSidePanelChange\",\"createElement\",\"Fragment\",\"className\",\"style\",\"marginLeft\",\"selectedRightSidePanel\",\"onValueChanged\",\"_getCustomButtonComponent\",\"CustomComponent\",\"activeButtonsIds\",\"map\",\"isActive\",\"parentContext\",\"toolbarClickCallback\",\"_handleToolbarButtonClick\",\"_getExpandableButtonComponent\",\"activeCommand\",\"_this5\",\"childButtons\",\"buttons\",\"childButton\",\"onClick\",\"indexOf\",\"onGroupMenuClick\",\"openMeasurementsPanel\",\"openSegmentationPanel\",\"_getDefaultButtonComponent\",\"_this\",\"hasCustomComponent\",\"hasNestedButtonDefinitions\",\"evt\",\"commandName\",\"assign\",\"commandOptions\",\"type\",\"toggables\",\"_ref\",\"togglable\",\"concat\",\"_this6\",\"toolbarModules\",\"TOOLBAR\",\"extension\",\"_extension$module\",\"definitions\",\"definition\",\"measurementButtons\",\"el\",\"moreSection\",\"moreSectionButtons\",\"otherButtons\",\"newMeasurementsButton\",\"newMoreButton\",\"index\",\"splice\",\"_this$props\",\"t\",\"_document$querySelect\",\"querySelector\",\"getBoundingClientRect\",\"x\",\"y\",\"newDialogId\",\"content\",\"defaultPosition\",\"title\",\"isLeftSidePanelOpen\",\"bool\",\"isRequired\",\"isRightSidePanelOpen\",\"selectedLeftSidePanel\",\"string\",\"func\",\"arrayOf\",\"array\",\"any\",\"modal\",\"connectedComponents_ToolbarRow_0\",\"StudyBrowser\",\"setActiveViewportSpecificData\",\"connectedComponents_ConnectedStudyBrowser\",\"onThumbnailClick\",\"displaySetInstanceUID\",\"displaySet\",\"studyMetadata\",\"reduce\",\"all\",\"current\",\"currentDisplaySet\",\"displaySets\",\"ds\",\"findDisplaySetByUID\",\"_servicesManager$serv\",\"services\",\"LoggerService\",\"UINotificationService\",\"isDerived\",\"Modality\",\"_displaySet$getSource\",\"getSourceDisplaySet\",\"error\",\"message\",\"show\",\"autoClose\",\"referencedDisplaySet\",\"activatedLabelmapPromise\",\"then\",\"activatedLabelmapIndex\",\"selectionFired\",\"CustomEvent\",\"detail\",\"dispatchEvent\",\"Error\",\"_error\",\"isSOPClassUIDSupported\",\"_error2\",\"utils\",\"esm\",\"_slicedToArray\",\"_arrayWithHoles\",\"_arr\",\"_n\",\"_d\",\"_e\",\"undefined\",\"_s\",\"_i\",\"next\",\"done\",\"err\",\"_iterableToArrayLimit\",\"_nonIterableRest\",\"ViewportPane_ViewportPane\",\"children\",\"onDrop\",\"propClassName\",\"_useDrop2\",\"accept\",\"drop\",\"droppedItem\",\"monitor\",\"canDrop\",\"isOver\",\"StudyInstanceUID\",\"collect\",\"highlighted\",\"hovered\",\"_useDrop2$\",\"ref\",\"data-cy\",\"propTypes\",\"node\",\"number\",\"components_ViewportGrid_ViewportPane\",\"EmptyViewport\",\"EmptyViewport_default\",\"loadAndCacheDerivedDisplaySets\",\"ViewportGrid_ViewportGrid_ViewportGrid\",\"availablePlugins\",\"defaultPluginName\",\"defaultPlugin\",\"setViewportData\",\"viewportData\",\"isStudyLoaded\",\"rowSize\",\"colSize\",\"snackbar\",\"logger\",\"ViewportPanes\",\"useMemo\",\"pluginName\",\"ViewportComponent\",\"JSON\",\"stringify\",\"_getViewportComponent\",\"active\",\"display\",\"gridTemplateRows\",\"gridTemplateColumns\",\"height\",\"width\",\"supportsDrop\",\"object\",\"defaultProps\",\"DefaultViewport\",\"React\",\"components_ViewportGrid_ViewportGrid\",\"memoize\",\"memoize_default\",\"getAvailableViewportModules\",\"viewportModules\",\"availableViewportModules\",\"moduleDefinition\",\"extensionId\",\"ViewportGrid_ConnectedViewportGrid\",\"VIEWPORT\",\"values\",\"values_default\",\"ViewerMain_typeof\",\"ViewerMain_defineProperties\",\"ViewerMain_getPrototypeOf\",\"ViewerMain_assertThisInitialized\",\"ViewerMain_setPrototypeOf\",\"ViewerMain_defineProperty\",\"ViewerMain_values\",\"ViewerMain_ViewerMain\",\"ViewerMain\",\"ViewerMain_classCallCheck\",\"dirtyViewportPanes\",\"viewportPane\",\"foundDisplaySet\",\"v\",\"vp\",\"findDisplaySet\",\"ViewerMain_inherits\",\"study\",\"dSet\",\"getDisplaySets\",\"fillEmptyViewportPanes\",\"prevViewportAmount\",\"viewportAmount\",\"isVtk\",\"keys\",\"clearViewportSpecificData\",\"connectedComponents_ViewerMain_0\",\"ConnectedViewerMain_OHIF$redux$actions\",\"_setViewportSpecificData\",\"_clearViewportSpecificData\",\"connectedComponents_ConnectedViewerMain\",\"SidePanel_SidePanel\",\"isOpen\",\"fromSideClass\",\"styles\",\"maxWidth\",\"marginRight\",\"Number\",\"parseInt\",\"is-open\",\"components_SidePanel_0\",\"ErrorBoundaryDialog_slicedToArray\",\"ErrorBoundaryDialog_arrayWithHoles\",\"ErrorBoundaryDialog_iterableToArrayLimit\",\"ErrorBoundaryDialog_nonIterableRest\",\"UIModalService\",\"ErrorBoundaryDialog_ErrorBoundaryDialog_ErrorBoundaryDialog\",\"fallbackComponent\",\"role\",\"onError\",\"componentStack\",\"_useState2\",\"open\",\"setOpen\",\"s\",\"name\",\"opened\",\"components_ErrorBoundaryDialog\",\"enums\",\"classes\",\"cornerstone\",\"cornerstone_default\",\"StudyPrefetcher_StudyPrefetcher\",\"studyPrefetcher\",\"StudyPrefetcher\",\"getInstance\",\"studiesMetadata\",\"studyMetadataManager\",\"get\",\"setStudies\",\"onNewImage\",\"_ref2\",\"addDisplaySet\",\"getStudy\",\"image\",\"getSeries\",\"getDisplaySetBySOPInstanceUID\",\"prefetch\",\"element\",\"onElementEnabled\",\"_ref3\",\"EVENTS\",\"NEW_IMAGE\",\"events\",\"ELEMENT_ENABLED\",\"destroy\",\"shape\",\"enabled\",\"order\",\"displaySetCount\",\"preventCache\",\"prefetchDisplaySetsTimeout\",\"includeActiveDisplaySet\",\"components_StudyPrefetcher_0\",\"StudyLoadingListener\",\"components_StudyLoadingMonitor\",\"studyLoadingListener\",\"clear\",\"addStudies\",\"asyncGeneratorStep\",\"gen\",\"resolve\",\"reject\",\"_next\",\"_throw\",\"arg\",\"info\",\"Promise\",\"_asyncToGenerator\",\"fn\",\"args\",\"arguments\",\"apply\",\"Viewer_typeof\",\"Viewer_defineProperties\",\"Viewer_getPrototypeOf\",\"Viewer_assertThisInitialized\",\"Viewer_setPrototypeOf\",\"Viewer_defineProperty\",\"Viewer_Viewer\",\"Viewer\",\"Viewer_classCallCheck\",\"thumbnails\",\"openMeasurements\",\"log\",\"earliestDate\",\"Date\",\"toISOString\",\"latestDate\",\"StudyDate\",\"timepointType\",\"timepointId\",\"studyInstanceUIDs\",\"PatientID\",\"isLocked\",\"timepointData\",\"query\",\"timepointIds\",\"timepoints\",\"onTimepointsUpdated\",\"measurements\",\"onMeasurementsUpdated\",\"activeServer\",\"server\",\"external\",\"servicesManager\",\"MeasurementApi\",\"setConfiguration\",\"dataExchange\",\"retrieve\",\"retrieveMeasurements\",\"store\",\"storeMeasurements\",\"TimepointApi\",\"retrieveTimepoints\",\"storeTimepoints\",\"remove\",\"removeTimepoint\",\"update\",\"updateTimepoint\",\"disassociate\",\"disassociateStudy\",\"_getActiveViewport\",\"Viewer_inherits\",\"dismissAll\",\"_updateThumbnails\",\"reload\",\"location\",\"_OHIF$measurements\",\"timepointApi\",\"measurementApi\",\"currentTimepointId\",\"activeDisplaySetInstanceUID\",\"_mapStudiesToThumbnails\",\"_this$props2\",\"prevActiveDisplaySetInstanceUID\",\"_this$props3\",\"VisiblePanelRight\",\"panelExt\",\"components\",\"comp\",\"component\",\"VisiblePanelLeft\",\"_openMeasurementsPanel\",\"selectedPanel\",\"sideClicked\",\"toUpperCase\",\"slice\",\"openKey\",\"selectedKey\",\"updatedState\",\"prevSelectedPanel\",\"isSameSelectedPanel\",\"Consumer\",\"appContext\",\"activeIndex\",\"appConfig\",\"showThumbnailProgressBar\",\"displayProgress\",\"getActiveViewport\",\"SeriesDescription\",\"SeriesNumber\",\"InstanceNumber\",\"numImageFrames\",\"images\",\"getImageId\",\"wadoRoot\",\"connectedComponents_Viewer_0\",\"_checkForDerivedDisplaySets\",\"regeneratorRuntime\",\"mark\",\"_callee\",\"derivedDisplaySetsNumber\",\"derivedDisplaySets\",\"wrap\",\"_context\",\"prev\",\"getDerivedDatasets\",\"referencedSeriesInstanceUID\",\"SeriesInstanceUID\",\"abrupt\",\"stop\",\"_x\",\"_x2\",\"_checkForSeriesInconsistencesWarnings\",\"_callee2\",\"inconsistencyWarnings\",\"_context2\",\"reconstructionIssues\",\"warning\",\"DATASET_4D\",\"VARYING_IMAGESDIMENSIONS\",\"VARYING_IMAGESCOMPONENTS\",\"VARYING_IMAGESORIENTATION\",\"IRREGULAR_SPACING\",\"MULTIFFRAMES\",\"missingFrames\",\"warn\",\"loadError\",\"segLoadErrorMessagge\",\"_x3\",\"_isDisplaySetActive\",\"_referencedDisplaySet\",\"imageId\",\"imageIndex\",\"Math\",\"floor\",\"hasWarnings\",\"hasDerivedDisplaySets\",\"altImageText\",\"ConnectedViewer_OHIF$redux$actions\",\"setTimepoints\",\"setMeasurements\",\"getActiveServer\",\"servers\",\"ConnectedViewer\",\"1399\",\"cornerstoneWADOImageLoader_min\",\"cornerstoneWADOImageLoader_min_default\",\"FileLoader\",\"file\",\"dataset\",\"pdfFileLoader_defineProperties\",\"pdfFileLoader\",\"_FileLoader\",\"_temp\",\"_getPrototypeOf2\",\"pdfFileLoader_classCallCheck\",\"_len\",\"_key\",\"wadouri\",\"loadFileRequest\",\"getDefaultStudy\",\"StudyTime\",\"AccessionNumber\",\"ReferringPhysicianName\",\"PatientName\",\"PatientBirthdate\",\"PatientSex\",\"StudyId\",\"StudyDescription\",\"instances\",\"metadata\",\"SOPInstanceUID\",\"SOPClassUID\",\"Rows\",\"Columns\",\"NumberOfFrames\",\"isLocalFile\",\"dcmjs_es\",\"dicomFileLoader_typeof\",\"dicomFileLoader_defineProperties\",\"dicomFileLoader_getPrototypeOf\",\"dicomFileLoader_assertThisInitialized\",\"dicomFileLoader_setPrototypeOf\",\"metadataProvider\",\"dicomFileLoader\",\"dicomFileLoader_classCallCheck\",\"dicomFileLoader_inherits\",\"dicomData\",\"DicomMessage\",\"readFile\",\"DicomMetaDictionary\",\"naturalizeDataset\",\"dict\",\"addInstance\",\"_meta\",\"namifyDataset\",\"meta\",\"e\",\"console\",\"getStudyFromDataset\",\"PatientBirthDate\",\"StudyID\",\"url\",\"fileLoaderService_typeof\",\"ownKeys\",\"enumerableOnly\",\"getOwnPropertySymbols\",\"symbols\",\"sym\",\"getOwnPropertyDescriptor\",\"fileLoaderService_defineProperties\",\"fileLoaderService_getPrototypeOf\",\"fileLoaderService_assertThisInitialized\",\"fileLoaderService_setPrototypeOf\",\"fileLoaderService_defineProperty\",\"localFileLoaders_fileLoaderService\",\"FileLoaderService\",\"fileLoaderService_classCallCheck\",\"fileType\",\"loader\",\"getLoader\",\"fileLoaderService_inherits\",\"groupBy\",\"list\",\"groupByKey\",\"listKey\",\"nonKeyCounter\",\"acc\",\"_acc$key$listKey\",\"source\",\"getOwnPropertyDescriptors\",\"defineProperties\",\"_objectSpread\",\"studyGroup\",\"seriesGrouped\",\"fileManager\",\"add\",\"loadFile\",\"getDataset\",\"getStudies\",\"d\",\"filesToStudies\",\"processFile\",\"fileLoaderService\",\"addFile\",\"sent\",\"t0\",\"_filesToStudies\",\"files\",\"processFilesPromises\",\"groupSeries\",\"flat\",\"1403\",\"exports\",\"1404\",\"1405\",\"1406\",\"1407\",\"1408\",\"1409\",\"1410\",\"1411\"],\"mappings\":\"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\"}","code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1395:function(e,t,n){\"use strict\";var r=n(17),i=n(0),a=n.n(i),o=n(1),s=n.n(o),u=n(25),c=n.n(u),l=n(20),p=n(386),d=n(749),f=n(7),m=n(3),v=n.n(m),y=n(96),h=(n(1403),n(252)),g=n(6),b=n.n(g),S=n(60),w=n.n(S),I=(0,b.a.import)(\"util/scrollToIndex\"),D=l.a.redux.actions.setViewportSpecificData,E=Object(r.b)((function(e){var t=e.viewports,n=(t.viewportSpecificData[t.activeViewportIndex]||{}).cine;return{activeEnabledElement:h.a.runCommand(\"getActiveViewportEnabledElement\"),activeViewportCineData:n||{isPlaying:!1,cineFrameRate:24},activeViewportIndex:e.viewports.activeViewportIndex}}),(function(e){return{dispatchSetViewportSpecificData:function(t,n){e(D(t,n))}}}),(function(e,t,n){var r=e.activeEnabledElement,i=e.activeViewportCineData,a=e.activeViewportIndex;return{cineFrameRate:i.cineFrameRate,isPlaying:i.isPlaying,onPlayPauseChanged:function(e){var n=w()(i);n.isPlaying=!n.isPlaying,t.dispatchSetViewportSpecificData(a,{cine:n})},onFrameRateChanged:function(e){var n=w()(i);n.cineFrameRate=e,t.dispatchSetViewportSpecificData(a,{cine:n})},onClickNextButton:function(){var e=b.a.getToolState(r,\"stack\");if(e&&e.data&&e.data.length){var t=e.data[0],n=t.currentImageIdIndex;n>=t.imageIds.length-1||I(r,n+1)}},onClickBackButton:function(){var e=b.a.getToolState(r,\"stack\");if(e&&e.data&&e.data.length){var t=e.data[0].currentImageIdIndex;0!==t&&I(r,t-1)}},onClickSkipToStart:function(){var e=b.a.getToolState(r,\"stack\");e&&e.data&&e.data.length&&I(r,0)},onClickSkipToEnd:function(){var e=b.a.getToolState(r,\"stack\");if(e&&e.data&&e.data.length){var t=e.data[0].imageIds.length-1;I(r,t)}}}}))(f.a),O=l.a.redux.actions,P=O.setLayout,T=O.setViewportActive,R=Object(r.b)((function(e){return{currentLayout:e.viewports.layout,activeViewportIndex:e.viewports.activeViewportIndex}}),(function(e){return{onChange:function(t,n,r){for(var i=[],a=t.row+1,o=t.col+1,s=a*o,u=0;u<s;u++){var c=n.viewports[u],l=c&&c.plugin;c&&c.vtk&&(l=\"cornerstone\"),i.push({plugin:l})}var p={numRows:a,numColumns:o,viewports:i};r>s-1&&e(T(0)),e(P(p))}}}),(function(e,t){var n=t.onChange,r=e.currentLayout,i=e.activeViewportIndex;return{onChange:function(e){return n(e,r,i)}}}))(f.h),C=n(108);function x(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||\"[object Arguments]\"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance\")}()}function j(e){return(j=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function U(e){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=function(e){function t(e){var n,r,i;!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),r=this,i=U(t).call(this,e),n=!i||\"object\"!==j(i)&&\"function\"!=typeof i?A(r):i,V(A(n),\"closeCineDialogIfNotApplicable\",(function(){var e=n.props.dialog,t=n.state,r=t.dialogId,i=t.activeButtons,a=t.toolbarButtons;r&&(a.find((function(e){return e.options&&\"CINE\"===e.options.behavior}))||(e.dismiss({id:r}),i=i.filter((function(e){return e.options&&\"CINE\"!==e.options.behavior})),n.setState({dialogId:null,activeButtons:i})))}));var a=G.call(A(n));return n.state={toolbarButtons:a,activeButtons:[]},n.seriesPerStudyCount=[],n._handleBuiltIn=W.bind(A(n)),n._onDerivedDisplaySetsLoadedAndCached=n._onDerivedDisplaySetsLoadedAndCached.bind(A(n)),n.updateButtonGroups(),n}var n,r,i;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(t,e),n=t,(r=[{key:\"updateButtonGroups\",value:function(){var e=this,t=h.c.modules[d.a.PANEL];this.buttonGroups={left:[],right:[]},t.forEach((function(t){var n=t.module,r=Array.from(n.defaultContext);n.menuOptions.forEach((function(t){var n=Array.from(t.context||r),i=e.props.activeContexts.some((function(e){return n.includes(e)})),a=\"function\"==typeof t.isDisabled&&t.isDisabled(e.props.studies,e.props.activeViewport);if(i&&!a){var o={value:t.target,icon:t.icon,bottomLabel:t.label,badgeNumber:t.badgeNumber,stateEvent:t.stateEvent},s=t.from||\"right\";e.buttonGroups[s].push(o)}}))}))}},{key:\"componentDidMount\",value:function(){document.addEventListener(\"deriveddisplaysetsloadedandcached\",this._onDerivedDisplaySetsLoadedAndCached)}},{key:\"componentWillUnmount\",value:function(){document.removeEventListener(\"deriveddisplaysetsloadedandcached\",this._onDerivedDisplaySetsLoadedAndCached)}},{key:\"_onDerivedDisplaySetsLoadedAndCached\",value:function(){this.updateButtonGroups(),this.setState({toolbarButtons:G.call(this)})}},{key:\"componentDidUpdate\",value:function(e){var t=e.activeContexts!==this.props.activeContexts,n=e.studies,r=e.activeViewport,i=this.props.activeViewport,a=this.props.studies,o=this.seriesPerStudyCount,s=!1;if(n.length!==a.length||r!==i)s=!0;else for(var u=0;u<a.length;u++)if(a[u].series.length!==o[u]){o[u]=a[u].series.length,s=!0;break}s&&this.updateButtonGroups(),t&&this.setState({toolbarButtons:G.call(this)},this.closeCineDialogIfNotApplicable)}},{key:\"render\",value:function(){var e=this,t=q.call(this,this.state.toolbarButtons,this.state.activeButtons),n=function(t,n){e.props.handleSidePanelChange(t,n)}.bind(this,\"right\");return a.a.createElement(a.a.Fragment,null,a.a.createElement(\"div\",{className:\"ToolbarRow\"},t,a.a.createElement(R,null),a.a.createElement(\"div\",{className:\"pull-right m-t-1 rm-x-1\",style:{marginLeft:\"auto\"}},this.buttonGroups.right.length&&a.a.createElement(f.n,{options:this.buttonGroups.right,value:this.props.selectedRightSidePanel||\"\",onValueChanged:n}))))}}])&&k(n.prototype,r),i&&k(n,i),t}(i.Component);function N(e,t){var n=e.CustomComponent;if(\"function\"==typeof n){var r=t.map((function(e){return e.id})),i=r.includes(e.id);return a.a.createElement(n,{parentContext:this,toolbarClickCallback:F.bind(this),button:e,key:e.id,activeButtons:r,isActive:i})}}function L(e,t){var n,r=this,i=e.buttons.map((function(e){return e.onClick=F.bind(r,e),t.map((function(e){return e.id})).indexOf(e.id)>-1&&(n=e.id),e}));return\"Annotations\"===e.id?a.a.createElement(f.f,{key:e.id,label:e.label,icon:e.icon,buttons:i,activeCommand:n,onGroupMenuClick:this.props.openMeasurementsPanel}):\"SegTools\"===e.id?a.a.createElement(f.f,{key:e.id,label:e.label,icon:\"inline-edit\",buttons:i,activeCommand:n,onGroupMenuClick:this.props.openSegmentationPanel}):a.a.createElement(f.f,{key:e.id,label:e.label,icon:e.icon,buttons:i,activeCommand:n})}function B(e,t){return a.a.createElement(f.A,{key:e.id,label:e.label,icon:e.icon,onClick:F.bind(this,e),isActive:t.map((function(e){return e.id})).includes(e.id)})}function q(e,t){var n=this;return e.map((function(e){var r=e.CustomComponent,i=e.buttons&&e.buttons.length;return r?N.call(n,e,t):i?L.call(n,e,t):B.call(n,e,t)}))}function F(e,t,n){var r=this.state.activeButtons;if(e.commandName){var i=Object.assign({evt:t},e.commandOptions);h.a.runCommand(e.commandName,i)}if(\"setToolActive\"===e.type){var a=r.filter((function(e){var t=e.options;return t&&!t.togglable}));this.setState({activeButtons:[].concat(x(a),[e])})}else\"builtIn\"===e.type&&this._handleBuiltIn(e)}function G(){var e=this,t=h.c.modules[d.a.TOOLBAR],n=[];t.forEach((function(t){var r=t.module,i=r.definitions,a=r.defaultContext;i.forEach((function(t){var r=t.context||a;e.props.activeContexts.includes(r)&&n.push(t)}))}));var r=n.filter((function(e){return\"Length\"===e.id||\"ArrowAnnotate\"===e.id||\"Angle\"===e.id})),i=n.filter((function(e){return\"More\"===e.id}));if(0!==i.length){var a=i[0].buttons.filter((function(e){return\"EllipticalRoi\"===e.id||\"RectangleRoi\"===e.id||\"Clear\"===e.id||\"Download\"===e.id||\"Bidirectional\"===e.id})),o=i[0].buttons.filter((function(e){return\"EllipticalRoi\"!==e.id&&\"RectangleRoi\"!==e.id&&\"Clear\"!==e.id&&\"Download\"!==e.id&&\"Bidirectional\"!==e.id})),s={id:\"Annotations\",label:\"Measurements\",icon:\"measure-target\",buttons:r.concat(a)},u={id:\"MoreTwo\",label:\"More\",icon:\"ellipse-circle\",buttons:o};n.push(s),r.map((function(e){var t=n.indexOf(e);-1!==t&&n.splice(t,1);var r=n.indexOf(i[0]);-1!==r&&n.splice(r,1,u)}))}return n}function W(e){var t=this.props,n=t.dialog,r=t.t,i=this.state.dialogId,a=e.id,o=e.options;if(\"CINE\"===o.behavior)if(i)n.dismiss({id:i}),this.setState((function(e){return{dialogId:null,activeButtons:x(e.activeButtons.filter((function(e){return e.id!==a})))}}));else{var s=document.querySelector(\".ViewerMain\").getBoundingClientRect(),u=s.x,c=s.y,l=n.create({content:E,defaultPosition:{x:u+20||0,y:c+20||0}});this.setState((function(t){return{dialogId:l,activeButtons:[].concat(x(t.activeButtons),[e])}}))}\"DOWNLOAD_SCREEN_SHOT\"===o.behavior&&h.a.runCommand(\"showDownloadViewportModal\",{title:r(\"Download High Quality Image\")})}V(_,\"propTypes\",{isLeftSidePanelOpen:s.a.bool.isRequired,isRightSidePanelOpen:s.a.bool.isRequired,selectedLeftSidePanel:s.a.string.isRequired,selectedRightSidePanel:s.a.string.isRequired,handleSidePanelChange:s.a.func.isRequired,openMeasurementsPanel:s.a.func.isRequired,openSegmentationPanel:s.a.func.isRequired,activeContexts:s.a.arrayOf(s.a.string).isRequired,studies:s.a.array,t:s.a.func.isRequired,dialog:s.a.any,modal:s.a.any}),V(_,\"defaultProps\",{studies:[]});var Y=Object(y.d)([\"Common\",\"ViewportDownloadForm\"])(Object(f.K)(Object(f.J)(Object(C.e)(_))));var J=n(404),H=l.a.redux.actions.setActiveViewportSpecificData,z=Object(r.b)(null,(function(e,t){return{onThumbnailClick:function(n){var r=function(e,t){return Array.isArray(e)&&e.reduce((function(e,t){var n=[];return t&&Array.isArray(t.displaySets)&&(n=t.displaySets),e.concat(n)}),[]).find((function(e){return e.displaySetInstanceUID===t}))||null}(t.studyMetadata,n),i=h.d.services,a=i.LoggerService,o=i.UINotificationService;if(r.isDerived){var s=r.Modality;if(\"SEG\"===s&&h.d){var u=r.getSourceDisplaySet(t.studyMetadata,!0,(function(e){a.error({error:e,message:e.message}),o.show({title:\"DICOM Segmentation Loader\",message:e.message,type:\"error\",autoClose:!0})}));r=u.referencedDisplaySet,u.activatedLabelmapPromise.then((function(e){var t=new CustomEvent(\"extensiondicomsegmentationsegselected\",{detail:{activatedLabelmapIndex:e}});document.dispatchEvent(t)}))}else r=r.getSourceDisplaySet(t.studyMetadata);if(!r){var c=new Error(\"Referenced series for \".concat(s,\" dataset not present.\")),l=\"Referenced series for \".concat(s,\" dataset not present.\");a.error({error:c,message:l}),o.show({autoClose:!1,title:\"Fail to load series\",message:l,type:\"error\"})}}if(!r){var p=new Error(\"Source data not present\");a.error({error:p,message:\"Source data not present\"}),o.show({autoClose:!1,title:\"Fail to load series\",message:\"Source data not present\",type:\"error\"})}if(!1===r.isSOPClassUIDSupported){var d=new Error(\"Modality not supported\");a.error({error:d,message:\"Modality not supported\"}),o.show({autoClose:!1,title:\"Fail to load series\",message:\"Modality not supported\",type:\"error\"})}e(H(r))}}}))(J.a),K=(n(1404),n(1405),n(192)),Q=n(293);n(1406);function X(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||\"[object Arguments]\"===Object.prototype.toString.call(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}()}var Z=function(e){var t=e.children,n=e.onDrop,r=e.viewportIndex,i=e.className,o=X(Object(Q.d)({accept:\"thumbnail\",drop:function(e,t){var i=t.canDrop(),a=t.isOver();if(i&&a&&n){var o=e.StudyInstanceUID,s=e.displaySetInstanceUID;n({viewportIndex:r,StudyInstanceUID:o,displaySetInstanceUID:s})}},collect:function(e){return{highlighted:e.canDrop(),hovered:e.isOver()}}}),2),s=o[0],u=s.hovered,l=s.highlighted,p=o[1];return a.a.createElement(\"div\",{className:c()(\"viewport-drop-target\",{hovered:u},{highlighted:l},i),ref:p,\"data-cy\":\"viewport-container-\".concat(r)},t)};Z.propTypes={children:s.a.node.isRequired,viewportIndex:s.a.number.isRequired,onDrop:s.a.func.isRequired,className:s.a.string};var $=Z;var ee=n(1407),te=n.n(ee),ne=K.a.loadAndCacheDerivedDisplaySets,re=function(e){var t=e.activeViewportIndex,n=e.availablePlugins,r=e.defaultPlugin,o=e.layout,s=e.numRows,u=e.numColumns,l=e.setViewportData,p=e.studies,d=e.viewportData,m=e.children,v=e.isStudyLoaded,y=100/s,h=100/u;if(!d||!d.length)return null;var g=Object(f.I)(),b=Object(f.G)();Object(i.useEffect)((function(){v&&d.forEach((function(e){ne(e,p,b,g)}))}),[p,d,v,g,b]);var S=a.a.useMemo((function(){return o.viewports.map((function(e,i){var o=d[i];if(!o)return null;var s={displaySet:o,studies:p},u=!e.plugin&&o&&o.plugin?o.plugin:e.plugin,f=function(e,t,n,r,i,o){if(e.displaySet){var s=r[i=i||o];if(!s)throw new Error(\"No Viewport Component available for name \".concat(i,\".\\n         Available plugins: \").concat(JSON.stringify(r)));return a.a.createElement(s,{viewportData:e,viewportIndex:t,children:[n]})}return a.a.createElement(te.a,null)}(s,i,m,n,u,r);return a.a.createElement($,{onDrop:l,viewportIndex:i,className:c()(\"viewport-container\",{active:t===i}),key:i},f)}))}),[o,d,p,m,n,r,l,t]);return a.a.createElement(\"div\",{\"data-cy\":\"viewprt-grid\",style:{display:\"grid\",gridTemplateRows:\"repeat(\".concat(s,\", \").concat(y,\"%)\"),gridTemplateColumns:\"repeat(\".concat(u,\", \").concat(h,\"%)\"),height:\"100%\",width:\"100%\"}},S)};re.propTypes={viewportData:s.a.array.isRequired,supportsDrop:s.a.bool.isRequired,activeViewportIndex:s.a.number.isRequired,layout:s.a.object.isRequired,availablePlugins:s.a.object.isRequired,setViewportData:s.a.func.isRequired,studies:s.a.array,children:s.a.node,defaultPlugin:s.a.string,numRows:s.a.number.isRequired,numColumns:s.a.number.isRequired},re.defaultProps={viewportData:[],numRows:1,numColumns:1,layout:{viewports:[{}]},activeViewportIndex:0,supportsDrop:!0,availablePlugins:{DefaultViewport:function(e){return React.createElement(\"div\",null,JSON.stringify(e))}},defaultPlugin:\"defaultViewportPlugin\"};var ie=re,ae=n(778),oe=n.n(ae),se=oe()((function(e){var t={};return e.forEach((function(e){t[e.extensionId]=e.module})),t})),ue=Object(r.b)((function(e){var t,n=h.c.modules[d.a.VIEWPORT],r=se(n);n.length&&(t=n[0].extensionId);var i=e.viewports;return{numRows:i.numRows,numColumns:i.numColumns,layout:i.layout,activeViewportIndex:i.activeViewportIndex,availablePlugins:r,defaultPlugin:t}}),null)(ie),ce=n(1398),le=n.n(ce);function pe(e){return(pe=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function de(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fe(e){return(fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function me(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function ve(e,t){return(ve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ye(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var he=oe()(le.a),ge=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),r=this,i=fe(t).call(this,e),n=!i||\"object\"!==pe(i)&&\"function\"!=typeof i?me(r):i,ye(me(n),\"fillEmptyViewportPanes\",(function(){var e=[],t=n.props,r=t.layout,i=t.viewportSpecificData,a=n.state.displaySets;if(a&&a.length){for(var o=0;o<r.viewports.length;o++){var s=i[o];if(s&&s.StudyInstanceUID&&s.displaySetInstanceUID)e.push({StudyInstanceUID:s.StudyInstanceUID,displaySetInstanceUID:s.displaySetInstanceUID});else{var u=a.find((function(t){return!e.some((function(e){return e.displaySetInstanceUID===t.displaySetInstanceUID}))}))||a[a.length-1];e.push(u)}}e.forEach((function(e,t){e&&e.StudyInstanceUID&&n.setViewportData({viewportIndex:t,StudyInstanceUID:e.StudyInstanceUID,displaySetInstanceUID:e.displaySetInstanceUID})}))}})),ye(me(n),\"setViewportData\",(function(e){var t=e.viewportIndex,r=e.StudyInstanceUID,i=e.displaySetInstanceUID,a=n.findDisplaySet(n.props.studies,r,i),o=h.d.services,s=o.LoggerService,u=o.UINotificationService;if(a.isDerived){if(\"SEG\"===a.Modality&&h.d){var c=a.getSourceDisplaySet(n.props.studies,!0,(function(e){s.error({error:e,message:e.message}),u.show({title:\"DICOM Segmentation Loader\",message:e.message,type:\"error\",autoClose:!0})}));a=c.referencedDisplaySet,c.activatedLabelmapPromise.then((function(e){var t=new CustomEvent(\"extensiondicomsegmentationsegselected\",{detail:{activatedLabelmapIndex:e}});document.dispatchEvent(t)}))}else a=a.getSourceDisplaySet(n.props.studies);if(!a){var l=new Error(\"Source data not present\"),p=\"Source data not present\";s.error({error:l,message:p}),u.show({autoClose:!1,title:\"Fail to load series\",message:p,type:\"error\"})}}if(!1===a.isSOPClassUIDSupported){var d=new Error(\"Modality not supported\");s.error({error:d,message:\"Modality not supported\"}),u.show({autoClose:!1,title:\"Fail to load series\",message:\"Modality not supported\",type:\"error\"})}n.props.setViewportSpecificData(t,a)})),n.state={displaySets:[]},n}var n,r,i;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ve(e,t)}(t,e),n=t,(r=[{key:\"getDisplaySets\",value:function(e){var t=[];return e.forEach((function(e){e.displaySets.forEach((function(e){e.plugin||(e.plugin=\"cornerstone\"),t.push(e)}))})),t}},{key:\"findDisplaySet\",value:function(e,t,n){var r=e.find((function(e){return e.StudyInstanceUID===t}));if(r)return r.displaySets.find((function(e){return e.displaySetInstanceUID===n}))}},{key:\"componentDidMount\",value:function(){if(this.props.studies){var e=this.getDisplaySets(this.props.studies);this.setState({displaySets:e},this.fillEmptyViewportPanes)}}},{key:\"componentDidUpdate\",value:function(e){var t=e.layout.viewports.length,n=this.props.layout.viewports.length,r=this.props.layout.viewports.some((function(e){return!!e.vtk}));if(this.props.studies!==e.studies||n!==t&&!r){var i=this.getDisplaySets(this.props.studies);this.setState({displaySets:i},this.fillEmptyViewportPanes)}}},{key:\"render\",value:function(){var e=this.props.viewportSpecificData,t=he(e);return a.a.createElement(\"div\",{className:\"ViewerMain\"},this.state.displaySets.length&&a.a.createElement(ue,{isStudyLoaded:this.props.isStudyLoaded,studies:this.props.studies,viewportData:t,setViewportData:this.setViewportData}))}},{key:\"componentWillUnmount\",value:function(){var e=this,t=this.props.viewportSpecificData;Object.keys(t).forEach((function(t){e.props.clearViewportSpecificData(t)}))}}])&&de(n.prototype,r),i&&de(n,i),t}(i.Component);ye(ge,\"propTypes\",{activeViewportIndex:s.a.number.isRequired,studies:s.a.array,viewportSpecificData:s.a.object.isRequired,layout:s.a.object.isRequired,setViewportSpecificData:s.a.func.isRequired,clearViewportSpecificData:s.a.func.isRequired});var be=ge,Se=l.a.redux.actions,we=Se.setViewportSpecificData,Ie=Se.clearViewportSpecificData,De=Object(r.b)((function(e){var t=e.viewports;return{activeViewportIndex:t.activeViewportIndex,layout:t.layout,viewportSpecificData:t.viewportSpecificData,viewports:e.viewports}}),(function(e){return{setViewportSpecificData:function(t,n){e(we(t,n))},clearViewportSpecificData:function(){e(Ie())}}}))(be),Ee=(n(1408),function(e){var t=e.from,n=e.isOpen,r=e.children,i=e.width,o=\"right\"===t?\"from-right\":\"from-left\",s=i?{maxWidth:i,marginRight:n?\"0\":-1*Number.parseInt(i)}:{};return a.a.createElement(\"section\",{style:s,className:c()(\"sidepanel\",o,{\"is-open\":n})},r)});Ee.propTypes={from:s.a.string.isRequired,isOpen:s.a.bool.isRequired,children:s.a.node,width:s.a.string};var Oe=Ee;n(1409);function Pe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||\"[object Arguments]\"===Object.prototype.toString.call(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}()}var Te=h.d.services.UIModalService,Re=function(e){var t=e.context,n=e.children;return a.a.createElement(f.d,{fallbackComponent:function(){return a.a.createElement(\"div\",{className:\"ErrorFallback\",role:\"alert\"},a.a.createElement(\"p\",null,\"Error rendering \",t,\". \",a.a.createElement(\"br\",null),\" Check the browser console for more details.\"))},context:t,onError:function(e,n){Te.show({content:function(){var r=Pe(Object(i.useState)(!1),2),o=r[0],s=r[1];return a.a.createElement(\"div\",{className:\"ErrorFallback\",role:\"alert\"},a.a.createElement(\"div\",{className:\"ErrorBoundaryDialog\"},a.a.createElement(\"h3\",{className:\"ErrorBoundaryDialogTitle\"},t,\": \",a.a.createElement(\"span\",null,e.message))),a.a.createElement(\"button\",{className:\"btn btn-primary btn-sm ErrorBoundaryDialogButton\",onClick:function(){return s((function(e){return!e}))}},a.a.createElement(f.g,{name:\"chevron-down\",className:c()(\"ErrorBoundaryDialogIcon\",{opened:o})}),\"Stack Trace\"),o&&a.a.createElement(\"pre\",null,n))},title:\"Something went wrong in \".concat(t)})}},n)};Re.propTypes={context:s.a.string.isRequired,children:s.a.node};var Ce=Re,xe=n(114),je=(n(1410),n(193)),ke=n(10),Ue=n.n(ke),Ae=(n(1411),function(e){var t=e.studies,n=e.options;return Object(i.useEffect)((function(){var e=je.a.StudyPrefetcher.getInstance(t,n),r=t.map((function(e){return K.a.studyMetadataManager.get(e.StudyInstanceUID)}));e.setStudies(r);var i=function(n){var r=n.detail,i=t.map((function(e){var t=K.a.studyMetadataManager.get(e.StudyInstanceUID),n=t.getDisplaySets();return(!n||n.length<1)&&e.displaySets.forEach((function(e){return t.addDisplaySet(e)})),t}));e.setStudies(i);var a=e.getStudy(r.image),o=e.getSeries(a,r.image),s=e.getInstance(o,r.image);if(a.displaySets&&a.displaySets.length>0){var u=e.getDisplaySetBySOPInstanceUID(a.displaySets,s).displaySetInstanceUID;e.prefetch(r.element,u)}},a=function(e){e.detail.element.addEventListener(Ue.a.EVENTS.NEW_IMAGE,i)};return Ue.a.events.addEventListener(Ue.a.EVENTS.ELEMENT_ENABLED,a),function(){Ue.a.events.removeEventListener(Ue.a.EVENTS.ELEMENT_ENABLED,a),e.destroy()}}),[n,t]),null});Ae.propTypes={studies:s.a.array.isRequired,options:s.a.shape({enabled:s.a.bool,order:s.a.string,displaySetCount:s.a.number,preventCache:s.a.bool,prefetchDisplaySetsTimeout:s.a.number,includeActiveDisplaySet:s.a.bool})},Ae.defaultProps={options:{order:\"closest\",displaySetCount:1,preventCache:!1,prefetchDisplaySetsTimeout:300,includeActiveDisplaySet:!1}};var Me=Ae,Ve=l.a.classes.StudyLoadingListener,_e=function(e){var t=e.studies;return Object(i.useEffect)((function(){var e=Ve.getInstance();return t&&t.length>0&&(e.clear(),e.addStudies(t)),function(){e.clear()}}),[t]),null};function Ne(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function Le(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Ne(a,r,i,o,s,\"next\",e)}function s(e){Ne(a,r,i,o,s,\"throw\",e)}o(void 0)}))}}function Be(e){return(Be=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function qe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fe(e){return(Fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ge(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function We(e,t){return(We=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ye(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Je=l.a.utils.studyMetadataManager,He=function(e){function t(e){var n,r,i;!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),r=this,i=Fe(t).call(this,e),n=!i||\"object\"!==Be(i)&&\"function\"!=typeof i?Ge(r):i,Ye(Ge(n),\"state\",{isLeftSidePanelOpen:!0,isRightSidePanelOpen:!1,selectedRightSidePanel:\"\",selectedLeftSidePanel:\"studies\",thumbnails:[],openMeasurements:!1}),Ye(Ge(n),\"retrieveTimepoints\",(function(e){l.a.log.info(\"retrieveTimepoints\");var t=(new Date).toISOString(),r=(new Date).toISOString();return n.props.studies&&(r=new Date(\"1000-01-01\").toISOString(),n.props.studies.forEach((function(e){var n=v()(e.StudyDate,\"YYYYMMDD\").toISOString();n<t&&(t=n),n>r&&(r=n)}))),Promise.resolve([{timepointType:\"baseline\",timepointId:\"TimepointId\",studyInstanceUIDs:n.props.studyInstanceUIDs,PatientID:e.PatientID,earliestDate:t,latestDate:r,isLocked:!1}])})),Ye(Ge(n),\"storeTimepoints\",(function(e){return l.a.log.info(\"storeTimepoints\"),Promise.resolve()})),Ye(Ge(n),\"updateTimepoint\",(function(e,t){return l.a.log.info(\"updateTimepoint\"),Promise.resolve()})),Ye(Ge(n),\"removeTimepoint\",(function(e){return l.a.log.info(\"removeTimepoint\"),Promise.resolve()})),Ye(Ge(n),\"disassociateStudy\",(function(e,t){return l.a.log.info(\"disassociateStudy\"),Promise.resolve()})),Ye(Ge(n),\"onTimepointsUpdated\",(function(e){n.props.onTimepointsUpdated&&n.props.onTimepointsUpdated(e)})),Ye(Ge(n),\"onMeasurementsUpdated\",(function(e){n.props.onMeasurementsUpdated&&n.props.onMeasurementsUpdated(e)}));var a=n.props.activeServer,o=Object.assign({},a),s={servicesManager:h.d};return l.a.measurements.MeasurementApi.setConfiguration({dataExchange:{retrieve:function(e){return p.a.retrieveMeasurements(e,s)},store:p.a.storeMeasurements},server:o}),l.a.measurements.TimepointApi.setConfiguration({dataExchange:{retrieve:n.retrieveTimepoints,store:n.storeTimepoints,remove:n.removeTimepoint,update:n.updateTimepoint,disassociate:n.disassociateStudy}}),n._getActiveViewport=n._getActiveViewport.bind(Ge(n)),n}var n,r,i;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&We(e,t)}(t,e),n=t,(r=[{key:\"componentWillUnmount\",value:function(){this.props.dialog&&this.props.dialog.dismissAll(),document.removeEventListener(\"segmentationLoadingError\",this._updateThumbnails)}},{key:\"componentDidMount\",value:function(){var e=this.props,t=e.studies,n=e.isStudyLoaded;e.reload&&window.location.reload(!1);var r=l.a.measurements,i=r.TimepointApi,a=r.MeasurementApi,o=new i(\"TimepointId\",{onTimepointsUpdated:this.onTimepointsUpdated}),s=new a(o,{onMeasurementsUpdated:this.onMeasurementsUpdated});if(this.currentTimepointId=\"TimepointId\",this.timepointApi=o,this.measurementApi=s,t){var u=t[0]&&t[0].PatientID;o.retrieveTimepoints({PatientID:u}),n&&this.measurementApi.retrieveMeasurements(u,[\"TimepointId\"]);var c=this.props.viewports[this.props.activeViewportIndex],p=c?c.displaySetInstanceUID:void 0;this.setState({thumbnails:Ze(t,p)})}document.addEventListener(\"segmentationLoadingError\",this._updateThumbnails.bind(this),!1)}},{key:\"componentDidUpdate\",value:function(e){var t=this.props,n=t.studies,r=t.isStudyLoaded,i=t.activeViewportIndex,a=t.viewports;t.reload&&window.location.reload(!1);var o=a[i],s=o?o.displaySetInstanceUID:void 0,u=e.viewports[e.activeViewportIndex],c=u?u.displaySetInstanceUID:void 0;if(n===e.studies&&i===e.activeViewportIndex&&s===c||this.setState({thumbnails:Ze(n,s),activeDisplaySetInstanceUID:s}),r&&r!==e.isStudyLoaded){var l=n[0]&&n[0].PatientID,p=this.currentTimepointId;this.timepointApi.retrieveTimepoints({PatientID:l}),this.measurementApi.retrieveMeasurements(l,[p])}}},{key:\"_updateThumbnails\",value:function(){var e=this.props,t=e.studies,n=e.activeViewportIndex,r=e.viewports[n],i=r?r.displaySetInstanceUID:void 0;this.setState({thumbnails:Ze(t,i),activeDisplaySetInstanceUID:i})}},{key:\"_getActiveViewport\",value:function(){return this.props.viewports[this.props.activeViewportIndex]}},{key:\"_openMeasurementsPanel\",value:function(){var e=null;return h.c.modules[d.a.PANEL].forEach((function(t){t.module.components.forEach((function(t){\"measurement-panel\"===t.id&&(e=t.component)}))})),e}},{key:\"render\",value:function(){var e,t=this,n=null;return this.state.openMeasurements&&\"measurement-panel\"===this.state.selectedRightSidePanel?n=this._openMeasurementsPanel():h.c.modules[d.a.PANEL].forEach((function(r){r.module.components.forEach((function(r){r.id===t.state.selectedRightSidePanel?n=r.component:r.id===t.state.selectedLeftSidePanel&&(e=r.component)}))})),a.a.createElement(a.a.Fragment,null,a.a.createElement(Ce,{context:\"ToolbarRow\"},a.a.createElement(Y,{activeViewport:this.props.viewports[this.props.activeViewportIndex],isLeftSidePanelOpen:this.state.isLeftSidePanelOpen,isRightSidePanelOpen:this.state.isRightSidePanelOpen,selectedLeftSidePanel:this.state.isLeftSidePanelOpen?this.state.selectedLeftSidePanel:\"\",selectedRightSidePanel:this.state.isRightSidePanelOpen?this.state.selectedRightSidePanel:\"\",openMeasurementsPanel:function(){return t.setState({openMeasurements:!0,isRightSidePanelOpen:!0,selectedRightSidePanel:\"measurement-panel\"})},openSegmentationPanel:function(){return t.setState({isRightSidePanelOpen:!0,selectedRightSidePanel:\"segmentation-panel\"})},handleSidePanelChange:function(e,n){var r=e&&e[0].toUpperCase()+e.slice(1),i=\"is\".concat(r,\"SidePanelOpen\"),a=\"selected\".concat(r,\"SidePanel\"),o=Object.assign({},t.state),s=o[i],u=o[a],c=u===n||null===n;o[a]=n||u,(!s||c)&&(o[i]=!o[i]),t.setState(o)},studies:this.props.studies})),a.a.createElement(C.c.Consumer,null,(function(e){return a.a.createElement(_e,{studies:t.props.studies})})),a.a.createElement(\"div\",{className:\"FlexboxLayout\"},a.a.createElement(Ce,{context:\"LeftSidePanel\"},a.a.createElement(Oe,{from:\"left\",isOpen:this.state.isLeftSidePanelOpen},e?a.a.createElement(e,{viewports:this.props.viewports,studies:this.props.studies,activeIndex:this.props.activeViewportIndex}):a.a.createElement(C.c.Consumer,null,(function(e){var n=e.appConfig.studyPrefetcher,r=t.state.thumbnails;return a.a.createElement(z,{studies:r,studyMetadata:t.props.studies,showThumbnailProgressBar:n&&n.enabled&&n.displayProgress})})))),a.a.createElement(\"div\",{className:c()(\"main-content\")},a.a.createElement(Ce,{context:\"ViewerMain\"},a.a.createElement(C.c.Consumer,null,(function(e){var n=e.appConfig.studyPrefetcher,r=t.props.studies;return n&&n.enabled&&a.a.createElement(Me,{studies:r,options:n})})),a.a.createElement(De,{studies:this.props.studies,isStudyLoaded:this.props.isStudyLoaded}))),a.a.createElement(Ce,{context:\"RightSidePanel\"},a.a.createElement(Oe,{from:\"right\",isOpen:this.state.isRightSidePanelOpen},n&&a.a.createElement(n,{isOpen:this.state.isRightSidePanelOpen,viewports:this.props.viewports,studies:this.props.studies,activeIndex:this.props.activeViewportIndex,activeViewport:this.props.viewports[this.props.activeViewportIndex],getActiveViewport:this._getActiveViewport})))))}}])&&qe(n.prototype,r),i&&qe(n,i),t}(i.Component);Ye(He,\"propTypes\",{studies:s.a.arrayOf(s.a.shape({StudyInstanceUID:s.a.string.isRequired,StudyDate:s.a.string,PatientID:s.a.string,displaySets:s.a.arrayOf(s.a.shape({displaySetInstanceUID:s.a.string.isRequired,SeriesDescription:s.a.string,SeriesNumber:s.a.number,InstanceNumber:s.a.number,numImageFrames:s.a.number,Modality:s.a.string.isRequired,images:s.a.arrayOf(s.a.shape({getImageId:s.a.func.isRequired}))}))})),studyInstanceUIDs:s.a.array,activeServer:s.a.shape({type:s.a.string,wadoRoot:s.a.string}),onTimepointsUpdated:s.a.func,onMeasurementsUpdated:s.a.func,viewports:s.a.object.isRequired,activeViewportIndex:s.a.number.isRequired,isStudyLoaded:s.a.bool,reload:s.a.bool,dialog:s.a.object});var ze=Object(f.J)(He),Ke=function(){var e=Le(regeneratorRuntime.mark((function e(t,n){var r,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=0,t.Modality&&![\"SEG\",\"SR\",\"RTSTRUCT\",\"RTDOSE\"].includes(t.Modality)&&(i=Je.get(n.StudyInstanceUID),a=i.getDerivedDatasets({referencedSeriesInstanceUID:t.SeriesInstanceUID}),r=a.length),e.abrupt(\"return\",r>0);case 3:case\"end\":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Qe=function(){var e=Le(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.inconsistencyWarnings){e.next=2;break}return e.abrupt(\"return\",t.inconsistencyWarnings);case 2:return n=[],\"SEG\"!==t.Modality?(t.reconstructionIssues&&0!==t.reconstructionIssues.length&&(t.reconstructionIssues.forEach((function(e){switch(e){case xe.a.DATASET_4D:n.push(\"The dataset is 4D.\");break;case xe.a.VARYING_IMAGESDIMENSIONS:n.push(\"The dataset frames have different dimensions (rows, columns).\");break;case xe.a.VARYING_IMAGESCOMPONENTS:n.push(\"The dataset frames have different components (Sample per pixel).\");break;case xe.a.VARYING_IMAGESORIENTATION:n.push(\"The dataset frames have different orientation.\");break;case xe.a.IRREGULAR_SPACING:n.push(\"The dataset frames have different pixel spacing.\");break;case xe.a.MULTIFFRAMES:n.push(\"The dataset is a multiframes.\")}})),n.push(\"The datasets is not a reconstructable 3D volume. MPR mode is not available.\")),t.missingFrames&&(!t.reconstructionIssues||t.reconstructionIssues&&!t.reconstructionIssues.find((function(e){return e===xe.a.DATASET_4D})))&&n.push(\"The datasets is missing frames: \"+t.missingFrames+\".\"),!1===t.isSOPClassUIDSupported&&n.push(\"The datasets is not supported.\"),t.inconsistencyWarnings=n):t.loadError&&(n.push(t.segLoadErrorMessagge),t.inconsistencyWarnings=n),e.abrupt(\"return\",n);case 5:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Xe=function(e,t,n){var r=!1,i=e.displaySetInstanceUID;if(\"SEG\"!==e.Modality&&\"RTSTRUCT\"!==e.Modality&&\"RTDOSE\"!==e.Modality)r=n===i;else if(e.getSourceDisplaySet)if(\"SEG\"===e.Modality){var a=e.getSourceDisplaySet(t,!1).referencedDisplaySet;r=!!a&&n===a.displaySetInstanceUID}else{var o=e.getSourceDisplaySet(t,!1);r=!!o&&n===o.displaySetInstanceUID}return r},Ze=function(e,t){return e.map((function(n){var r=n.StudyInstanceUID,i=[];return n.displaySets.map((function(r){if(\"SR\"!==r.Modality&&\"SEG\"!==r.Modality){var a,o=r.displaySetInstanceUID,s=r.SeriesDescription,u=r.numImageFrames,c=r.SeriesNumber;if(r.images&&r.images.length){var l=Math.floor(r.images.length/2);a=r.images[l].getImageId()}var p=Qe(r),d=Ke(r,n);i.push({active:Xe(r,e,t),imageId:a,altImageText:void 0,displaySetInstanceUID:o,SeriesDescription:s,numImageFrames:u,SeriesNumber:c,hasWarnings:p,hasDerivedDisplaySets:d})}})),{StudyInstanceUID:r,thumbnails:i}}))},$e=l.a.redux.actions,et=$e.setTimepoints,tt=$e.setMeasurements,nt=function(e){return e.servers.find((function(e){return!0===e.active}))},rt=Object(r.b)((function(e){var t=e.viewports,n=e.servers;return{viewports:t.viewportSpecificData,activeViewportIndex:t.activeViewportIndex,activeServer:nt(n)}}),(function(e){return{onTimepointsUpdated:function(t){e(et(t))},onMeasurementsUpdated:function(t){e(tt(t))}}}))(ze);t.a=rt},1399:function(e,t,n){\"use strict\";var r=n(75),i=n.n(r);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(){var t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),r=void 0,(n=\"fileType\")in(t=this)?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r}var t,n,r;return t=e,(n=[{key:\"loadFile\",value:function(e,t){}},{key:\"getDataset\",value:function(e,t){}},{key:\"getStudies\",value:function(e,t){}}])&&a(t.prototype,n),r&&a(t,r),e}();function s(e){return(s=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=new(function(e){function t(){var e,n,r,i,a,o,u;!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);for(var p=arguments.length,d=new Array(p),f=0;f<p;f++)d[f]=arguments[f];return r=this,n=!(i=(e=c(t)).call.apply(e,[this].concat(d)))||\"object\"!==s(i)&&\"function\"!=typeof i?l(r):i,a=l(n),u=\"application/pdf\",(o=\"fileType\")in a?Object.defineProperty(a,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):a[o]=u,n}var n,r,a;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),n=t,(r=[{key:\"loadFile\",value:function(e,t){return i.a.wadouri.loadFileRequest(t)}},{key:\"getDataset\",value:function(e,t){var n={};return n.imageId=e.imageId||t,n}},{key:\"getStudies\",value:function(e,t){return this.getDefaultStudy(t)}},{key:\"getDefaultStudy\",value:function(e){return{StudyInstanceUID:\"\",StudyDate:\"\",StudyTime:\"\",AccessionNumber:\"\",ReferringPhysicianName:\"\",PatientName:\"\",PatientID:\"\",PatientBirthdate:\"\",PatientSex:\"\",StudyId:\"\",StudyDescription:\"\",series:[{SeriesInstanceUID:\"\",SeriesDescription:\"\",SeriesNumber:\"\",instances:[{metadata:{SOPInstanceUID:\"\",SOPClassUID:\"1.2.840.10008.5.1.4.1.1.104.1\",Rows:\"\",Columns:\"\",NumberOfFrames:0,InstanceNumber:1},getImageId:function(){return e},isLocalFile:!0}]}]}}}])&&u(n.prototype,r),a&&u(n,a),t}(o)),f=n(43);function m(e){return(m=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var b=n(20).a.cornerstone.metadataProvider,S=new(function(e){function t(){var e,n,r,i,a,o,s;!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);for(var u=arguments.length,c=new Array(u),l=0;l<u;l++)c[l]=arguments[l];return r=this,n=!(i=(e=y(t)).call.apply(e,[this].concat(c)))||\"object\"!==m(i)&&\"function\"!=typeof i?h(r):i,a=h(n),s=\"application/dicom\",(o=\"fileType\")in a?Object.defineProperty(a,o,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[o]=s,n}var n,r,a;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,e),n=t,(r=[{key:\"loadFile\",value:function(e,t){return i.a.wadouri.loadFileRequest(t)}},{key:\"getDataset\",value:function(e,t){var n={};try{var r=f.b.data.DicomMessage.readFile(e);n=f.b.data.DicomMetaDictionary.naturalizeDataset(r.dict),b.addInstance(n),n._meta=f.b.data.DicomMetaDictionary.namifyDataset(r.meta)}catch(e){console.error(\"Error reading dicom file\",e)}return n.imageId=t,n}},{key:\"getStudies\",value:function(e,t){return this.getStudyFromDataset(e)}},{key:\"getStudyFromDataset\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.StudyInstanceUID,n=e.StudyDate,r=e.StudyTime,i=e.AccessionNumber,a=e.ReferringPhysicianName,o=e.PatientName,s=e.PatientID,u=e.PatientBirthDate,c=e.PatientSex,l=e.StudyID,p=e.StudyDescription,d=e.SeriesInstanceUID,f=e.SeriesDescription,m=e.SeriesNumber,v=e.imageId,y={metadata:e,url:v},h={SeriesInstanceUID:d,SeriesDescription:f,SeriesNumber:m,instances:[y]},g={StudyInstanceUID:t,StudyDate:n,StudyTime:r,AccessionNumber:i,ReferringPhysicianName:a,PatientName:o,PatientID:s,PatientBirthDate:u,PatientSex:c,StudyID:l,StudyDescription:p,series:[h]};return g}}])&&v(n.prototype,r),a&&v(n,a),t}(o));function w(e){return(w=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function I(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||\"[object Arguments]\"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance\")}()}function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var C=function(e){function t(e){var n,r,i;!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),r=this,n=!(i=O(t).call(this))||\"object\"!==w(i)&&\"function\"!=typeof i?P(r):i,R(P(n),\"fileType\",void 0),R(P(n),\"loader\",void 0);var a=e&&e.type;return n.loader=n.getLoader(a),n.fileType=n.loader.fileType,n}var n,r,a;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(t,e),n=t,a=[{key:\"groupSeries\",value:function(e){var t=function(e,t,n){var r=1;return e.reduce((function(e,i){var a,o=i[t],s=i[n];return e[o=o||\"\"+r++]||(e[o]=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(n,!0).forEach((function(t){R(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},i),e[o][n]=[]),(a=e[o][n]).push.apply(a,I(s)),e}),{})};return Object.values(t(e,\"StudyInstanceUID\",\"series\")).map((function(e){var n=t(e.series,\"SeriesInstanceUID\",\"instances\");return e.series=Object.values(n),e}))}}],(r=[{key:\"addFile\",value:function(e){return i.a.wadouri.fileManager.add(e)}},{key:\"loadFile\",value:function(e,t){return this.loader.loadFile(e,t)}},{key:\"getDataset\",value:function(e,t){return this.loader.getDataset(e,t)}},{key:\"getStudies\",value:function(e,t){return this.loader.getStudies(e,t)}},{key:\"getLoader\",value:function(e){return\"application/pdf\"===e?d:S}}])&&E(n.prototype,r),a&&E(n,a),t}(o);function x(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function j(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){x(a,r,i,o,s,\"next\",e)}function s(e){x(a,r,i,o,s,\"throw\",e)}o(void 0)}))}}n.d(t,\"a\",(function(){return U}));var k=function(){var e=j(regeneratorRuntime.mark((function e(t){var n,r,i,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=new C(t),r=n.addFile(t),e.next=5,n.loadFile(t,r);case 5:return i=e.sent,e.next=8,n.getDataset(i,r);case 8:return a=e.sent,e.next=11,n.getStudies(a,r);case 11:return o=e.sent,e.abrupt(\"return\",o);case 15:e.prev=15,e.t0=e.catch(0),console.log(e.t0.name,\":Error when trying to load and process local files:\",e.t0.message);case 18:case\"end\":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}();function U(e){return A.apply(this,arguments)}function A(){return(A=j(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.map(k),e.next=3,Promise.all(n);case 3:return r=e.sent,e.abrupt(\"return\",C.groupSeries(r.flat()));case 5:case\"end\":return e.stop()}}),e)})))).apply(this,arguments)}},1403:function(e,t,n){},1404:function(e,t,n){},1405:function(e,t,n){},1406:function(e,t,n){},1407:function(e,t){},1408:function(e,t,n){},1409:function(e,t,n){},1410:function(e,t,n){},1411:function(e,t,n){}}]);","extractedComments":[]}