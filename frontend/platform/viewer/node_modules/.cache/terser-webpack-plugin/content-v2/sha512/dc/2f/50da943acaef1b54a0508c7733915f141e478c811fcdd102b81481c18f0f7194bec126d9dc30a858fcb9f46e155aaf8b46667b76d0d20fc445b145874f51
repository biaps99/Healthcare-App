{"map":"{\"version\":3,\"sources\":[\"8.bundle.2e1c2d9fc9d5bbe4a849.js\"],\"names\":[\"window\",\"push\",\"1439\",\"module\",\"exports\",\"__webpack_require__\",\"1463\",\"__webpack_exports__\",\"r\",\"react\",\"react_default\",\"n\",\"prop_types\",\"prop_types_default\",\"dist_cornerstone\",\"cornerstone_default\",\"moment\",\"moment_default\",\"formatNumberPrecision\",\"number\",\"precision\",\"parseFloat\",\"toFixed\",\"classnames\",\"classnames_default\",\"Icon\",\"tooltip\",\"overlayTrigger\",\"_typeof\",\"obj\",\"Symbol\",\"iterator\",\"constructor\",\"prototype\",\"_defineProperties\",\"target\",\"props\",\"i\",\"length\",\"descriptor\",\"enumerable\",\"configurable\",\"writable\",\"Object\",\"defineProperty\",\"key\",\"_possibleConstructorReturn\",\"self\",\"call\",\"ReferenceError\",\"_assertThisInitialized\",\"_getPrototypeOf\",\"o\",\"setPrototypeOf\",\"getPrototypeOf\",\"__proto__\",\"_setPrototypeOf\",\"p\",\"value\",\"OHIFCornerstoneViewportOverlay_OHIFCornerstoneViewportOverlay\",\"_PureComponent\",\"OHIFCornerstoneViewportOverlay\",\"instance\",\"Constructor\",\"TypeError\",\"_classCallCheck\",\"this\",\"apply\",\"arguments\",\"protoProps\",\"staticProps\",\"subClass\",\"superClass\",\"create\",\"_inherits\",\"_this$props\",\"imageId\",\"scale\",\"windowWidth\",\"windowCenter\",\"inconsistencyWarnings\",\"zoomPercentage\",\"seriesMetadata\",\"a\",\"metaData\",\"get\",\"imagePlaneModule\",\"rows\",\"columns\",\"sliceThickness\",\"sliceLocation\",\"seriesNumber\",\"seriesDescription\",\"generalStudyModule\",\"studyDate\",\"studyTime\",\"studyDescription\",\"patientModule\",\"patientId\",\"patientName\",\"instanceNumber\",\"frameRate\",\"frameTime\",\"compression\",\"generalImageModule\",\"cornerstone\",\"lossyImageCompression\",\"lossyImageCompressionRatio\",\"lossyImageCompressionMethod\",\"getCompression\",\"wwwc\",\"concat\",\"imageDimensions\",\"_this$props2\",\"imageIndex\",\"stackSize\",\"inconsistencyWarningsOn\",\"getWarningContent\",\"warningList\",\"Array\",\"isArray\",\"listedWarnings\",\"map\",\"warn\",\"index\",\"createElement\",\"Fragment\",\"normal\",\"className\",\"name\",\"replace\",\"trim\",\"formatPN\",\"date\",\"strFormat\",\"undefined\",\"format\",\"formatDICOMDate\",\"time\",\"formatDICOMTime\",\"placement\",\"overlay\",\"id\",\"getWarningInfo\",\"isNaN\",\"isRequired\",\"oneOfType\",\"string\",\"array\",\"src_components_OHIFCornerstoneViewportOverlay\",\"index_umd\",\"index_umd_default\",\"src\",\"es\",\"lodash_throttle\",\"lodash_throttle_default\",\"state\",\"cornerstoneTools\",\"cornerstoneTools_default\",\"toolNames\",\"DICOM_SR_DISPLAY_TOOL\",\"scoordTypes\",\"POINT\",\"MULTIPOINT\",\"POLYLINE\",\"CIRCLE\",\"ELLIPSE\",\"POLYGON\",\"DICOMSRDisplayTool_typeof\",\"_toConsumableArray\",\"arr\",\"arr2\",\"_arrayWithoutHoles\",\"iter\",\"toString\",\"from\",\"_iterableToArray\",\"_nonIterableSpread\",\"DICOMSRDisplayTool_defineProperties\",\"DICOMSRDisplayTool_possibleConstructorReturn\",\"DICOMSRDisplayTool_assertThisInitialized\",\"DICOMSRDisplayTool_getPrototypeOf\",\"DICOMSRDisplayTool_setPrototypeOf\",\"draw\",\"drawJoinedLines\",\"drawCircle\",\"drawEllipse\",\"drawHandles\",\"drawArrow\",\"getNewContext\",\"BaseTool\",\"drawLinkedTextBox\",\"DICOMSRDisplayTool_DICOMSRDisplayTool\",\"_BaseTool\",\"DICOMSRDisplayTool\",\"_this\",\"DICOMSRDisplayTool_classCallCheck\",\"defaultProps\",\"mixins\",\"initialProps\",\"assign\",\"_module\",\"getModule\",\"DICOMSRDisplayTool_inherits\",\"evt\",\"_this2\",\"eventData\",\"detail\",\"element\",\"toolState\",\"trackingUniqueIdentifiersForElement\",\"getters\",\"activeIndex\",\"trackingUniqueIdentifiers\",\"activeTrackingUniqueIdentifier\",\"filteredToolData\",\"data\",\"filter\",\"td\",\"includes\",\"TrackingUniqueIdentifier\",\"_loop\",\"renderableData\",\"labels\",\"color\",\"getActiveColor\",\"getToolColor\",\"options\",\"lineWidth\",\"handleRadius\",\"keys\",\"forEach\",\"GraphicType\",\"renderableDataForGraphicType\",\"renderPoint\",\"renderMultipoint\",\"renderPolyLine\",\"renderCircle\",\"renderEllipse\",\"context\",\"canvasContext\",\"canvas\",\"handles\",\"textBox\",\"active\",\"hasMoved\",\"movesIndependently\",\"drawnIndependently\",\"allowedOutsideImage\",\"hasBoundingBox\",\"anchorPoints\",\"points\",\"image\",\"xOffset\",\"yOffset\",\"point\",\"x\",\"y\",\"circle\",\"center\",\"radius\",\"ellipse\",\"corner1\",\"corner2\",\"halfWidth\",\"Math\",\"abs\",\"halfHeight\",\"_getTextBoxAnchorPointsForRenderableData\",\"bottomRight\",\"max\",\"text\",\"labelLength\",\"min\",\"lines\",\"labelEntry\",\"_labelToShorthand\",\"label\",\"_getTextBoxLinesFromLabels\",\"textBoxAnchorPoints\",\"handleStartCanvas\",\"pixelToCanvas\",\"handleEndCanvas\",\"SHORT_HAND_MAP\",\"Short Axis\",\"Long Axis\",\"AREA\",\"Length\",\"CORNERSTONEFREETEXT\",\"shortHand\",\"tools_initSRTools\",\"targetElement\",\"toolAlias\",\"toolName\",\"getToolAlias\",\"addToolForElement\",\"setToolEnabledForElement\",\"LengthTool\",\"configuration\",\"renderDashed\",\"ArrowAnnotateTool\",\"BidirectionalTool\",\"EllipticalRoiTool\",\"RectangleRoiTool\",\"FreehandRoiTool\",\"setToolActiveForElement\",\"pointers\",\"mouseButtonMask\",\"ownKeys\",\"object\",\"enumerableOnly\",\"getOwnPropertySymbols\",\"symbols\",\"sym\",\"getOwnPropertyDescriptor\",\"ConnectedCornerstoneViewport_defineProperty\",\"_OHIF$redux$actions\",\"redux\",\"actions\",\"_setViewportActive\",\"setViewportActive\",\"_setViewportSpecificData\",\"setViewportSpecificData\",\"_OHIF$measurements$Me\",\"measurements\",\"MeasurementHandlers\",\"onAdded\",\"onRemoved\",\"onModified\",\"MEASUREMENT_ACTION_MAP\",\"added\",\"removed\",\"modified\",\"event\",\"src_ConnectedCornerstoneViewport\",\"ownProps\",\"dataFromStore\",\"extensions\",\"viewportIndex\",\"isActive\",\"viewports\",\"activeViewportIndex\",\"viewportSpecificData\",\"isPlaying\",\"cine\",\"cineFrameRate\",\"source\",\"getOwnPropertyDescriptors\",\"defineProperties\",\"_objectSpread\",\"isStackPrefetchEnabled\",\"hasOwnProperty\",\"stackPrefetch\",\"enabled\",\"dispatch\",\"onElementEnabled\",\"enabledElement\",\"plugin\",\"onMeasurementsChanged\",\"action\",\"studyMetadataManager\",\"utils\",\"tools_checkForSRAnnotations\",\"_ref\",\"displaySet\",\"srModule\",\"StudyInstanceUID\",\"studyMetadata\",\"srDisplaySets\",\"getDisplaySets\",\"ds\",\"Modality\",\"_measurements\",\"m\",\"loaded\",\"measurement\",\"setters\",\"activeTrackingUniqueIdentifierForElement\",\"updateImage\",\"OHIFCornerstoneViewport_typeof\",\"_extends\",\"asyncGeneratorStep\",\"gen\",\"resolve\",\"reject\",\"_next\",\"_throw\",\"arg\",\"info\",\"error\",\"done\",\"Promise\",\"then\",\"OHIFCornerstoneViewport_defineProperties\",\"OHIFCornerstoneViewport_getPrototypeOf\",\"OHIFCornerstoneViewport_assertThisInitialized\",\"OHIFCornerstoneViewport_setPrototypeOf\",\"OHIFCornerstoneViewport_defineProperty\",\"StackManager\",\"OHIFCornerstoneViewport_OHIFCornerstoneViewport\",\"_Component\",\"OHIFCornerstoneViewport\",\"_getPrototypeOf2\",\"OHIFCornerstoneViewport_classCallCheck\",\"_len\",\"args\",\"_key\",\"viewportData\",\"fn\",\"regeneratorRuntime\",\"mark\",\"_callee\",\"studies\",\"displaySetInstanceUID\",\"SOPInstanceUID\",\"frameIndex\",\"stack\",\"wrap\",\"_context\",\"prev\",\"next\",\"getCornerstoneStack\",\"abrupt\",\"stop\",\"err\",\"_x\",\"_x2\",\"_x3\",\"_x4\",\"_x5\",\"OHIFCornerstoneViewport_inherits\",\"console\",\"log\",\"clearStacks\",\"Error\",\"study\",\"find\",\"displaySets\",\"set\",\"storedStack\",\"findOrCreateStack\",\"currentImageIdIndex\",\"imageIds\",\"findIndex\",\"_this$props$viewportD\",\"sopClassUIDs\",\"getViewportData\",\"setState\",\"setStateFromProps\",\"prevProps\",\"prevDisplaySet\",\"_this3\",\"childrenWithProps\",\"_this$state$viewportD\",\"children\",\"child\",\"cloneElement\",\"imageIdIndex\",\"onNewImageDebounced\",\"_ref2\",\"sopInstanceUid\",\"onNewImage\",\"onNewImageDebounceTime\",\"viewportOverlayComponent\",\"customProps\",\"node\",\"bool\"],\"mappings\":\"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\"}","code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{1439:function(e,t,n){},1463:function(e,t,n){\"use strict\";n.r(t);var r=n(0),a=n.n(r),o=n(1),i=n.n(o),c=n(3),s=n.n(c),l=(n(1439),n(6)),u=n.n(l);function f(e,t){if(null!==e)return parseFloat(e).toFixed(t)}var d=n(28),p=n.n(d),m=n(34),y=n(199),v=n(167);function h(e){return(h=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return!t||\"object\"!==h(t)&&\"function\"!=typeof t?function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(e):t}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var E,O,S,x=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),g(this,I(t).apply(this,arguments))}var n,r,o;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(t,e),n=t,(r=[{key:\"render\",value:function(){var e=this.props,t=e.imageId,n=e.scale,r=e.windowWidth,o=e.windowCenter,i=e.inconsistencyWarnings;if(!t)return null;var c,l=f(100*n,0),d=s.a.metaData.get(\"generalSeriesModule\",t)||{},h=s.a.metaData.get(\"imagePlaneModule\",t)||{},b=h.rows,g=h.columns,I=h.sliceThickness,w=h.sliceLocation,E=d.seriesNumber,O=d.seriesDescription,S=s.a.metaData.get(\"generalStudyModule\",t)||{},x=S.studyDate,P=S.studyTime,D=S.studyDescription,k=s.a.metaData.get(\"patientModule\",t)||{},T=k.patientId,R=k.patientName,j=(s.a.metaData.get(\"generalImageModule\",t)||{}).instanceNumber,C=f(1e3/(s.a.metaData.get(\"cineModule\",t)||{}).frameTime,1),L=function(e){var t=cornerstone.metaData.get(\"generalImageModule\",e)||{},n=t.lossyImageCompression,r=t.lossyImageCompressionRatio,a=t.lossyImageCompressionMethod;return\"01\"===n&&\"\"!==r?(a||\"Lossy: \")+f(r,2)+\" : 1\":\"Lossless / Uncompressed\"}(t),M=\"W: \".concat(r.toFixed?r.toFixed(0):r,\" L: \").concat(r.toFixed?o.toFixed(0):o),F=\"\".concat(g,\" x \").concat(b),N=this.props,A=N.imageIndex,U=N.stackSize,_=!(!i||0===i.length),Y=function(e){if(Array.isArray(e)){var t=e.map((function(e,t){return a.a.createElement(\"li\",{key:t},e)}));return a.a.createElement(\"ol\",null,t)}return a.a.createElement(a.a.Fragment,null,e)},q=a.a.createElement(a.a.Fragment,null,a.a.createElement(\"div\",{className:\"top-left overlay-element\"},a.a.createElement(\"div\",null,function(e){if(e)return e.replace(\"^\",\", \").replace(/\\^/g,\" \").trim()}(R)),a.a.createElement(\"div\",null,T)),a.a.createElement(\"div\",{className:\"top-right overlay-element\"},a.a.createElement(\"div\",null,D),a.a.createElement(\"div\",null,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"MMM D, YYYY\";return u()(e,\"YYYYMMDD\").format(t)}(x),\" \",function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"HH:mm:ss\";return u()(e,\"HH:mm:ss\").format(t)}(P))),a.a.createElement(\"div\",{className:\"bottom-right overlay-element\"},a.a.createElement(\"div\",null,\"Zoom: \",l,\"%\"),a.a.createElement(\"div\",null,M),a.a.createElement(\"div\",{className:\"compressionIndicator\"},L)),a.a.createElement(\"div\",{className:\"bottom-left2 warning\"},a.a.createElement(\"div\",null,_?function(e,t){return a.a.createElement(a.a.Fragment,null,0!=t.length?a.a.createElement(v.a,{key:e,placement:\"left\",overlay:a.a.createElement(y.a,{placement:\"left\",className:\"in tooltip-warning\",id:\"tooltip-left\"},a.a.createElement(\"div\",{className:\"warningTitle\"},\"Series Inconsistencies\"),a.a.createElement(\"div\",{className:\"warningContent\"},Y(t)))},a.a.createElement(\"div\",{className:p()(\"warning\")},a.a.createElement(\"span\",{className:\"warning-icon\"},a.a.createElement(m.a,{name:\"exclamation-triangle\"})))):a.a.createElement(a.a.Fragment,null))}(E,i):\"\")),a.a.createElement(\"div\",{className:\"bottom-left overlay-element\"},a.a.createElement(\"div\",null,E>=0?\"Ser: \".concat(E):\"\"),a.a.createElement(\"div\",null,U>1?\"Img: \".concat(j,\" \").concat(A,\"/\").concat(U):\"\"),a.a.createElement(\"div\",null,C>=0?\"\".concat(f(C,2),\" FPS\"):\"\",a.a.createElement(\"div\",null,F),a.a.createElement(\"div\",null,\"number\"!=typeof(c=w)||isNaN(c)?\"\":\"Loc: \".concat(f(w,2),\" mm \"),I?\"Thick: \".concat(f(I,2),\" mm\"):\"\"),a.a.createElement(\"div\",null,O))));return a.a.createElement(\"div\",{className:\"OHIFCornerstoneViewportOverlay\"},q)}}])&&b(n.prototype,r),o&&b(n,o),t}(r.PureComponent);E=x,O=\"propTypes\",S={scale:i.a.number.isRequired,windowWidth:i.a.oneOfType([i.a.number.isRequired,i.a.string.isRequired]),windowCenter:i.a.oneOfType([i.a.number.isRequired,i.a.string.isRequired]),imageId:i.a.string.isRequired,imageIndex:i.a.number.isRequired,stackSize:i.a.number.isRequired,inconsistencyWarnings:i.a.array.isRequired},O in E?Object.defineProperty(E,O,{value:S,enumerable:!0,configurable:!0,writable:!0}):E[O]=S;var P=x,D=n(1440),k=n.n(D),T=n(22),R=n(19),j=n(301),C=n.n(j),L=n(81),M=n(4),F=n.n(M),N={DICOM_SR_DISPLAY_TOOL:\"DICOMSRDisplayTool\"},A={POINT:\"POINT\",MULTIPOINT:\"MULTIPOINT\",POLYLINE:\"POLYLINE\",CIRCLE:\"CIRCLE\",ELLIPSE:\"ELLIPSE\",POLYGON:\"POLYGON\"},U=n(421);function _(e){return(_=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function Y(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||\"[object Arguments]\"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance\")}()}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function B(e,t){return!t||\"object\"!==_(t)&&\"function\"!=typeof t?function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(e):t}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function W(e,t){return(W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var H=Object(M.importInternal)(\"drawing/draw\"),G=Object(M.importInternal)(\"drawing/drawJoinedLines\"),J=Object(M.importInternal)(\"drawing/drawCircle\"),Z=Object(M.importInternal)(\"drawing/drawEllipse\"),z=Object(M.importInternal)(\"drawing/drawHandles\"),X=Object(M.importInternal)(\"drawing/drawArrow\"),K=Object(M.importInternal)(\"drawing/getNewContext\"),Q=Object(M.importInternal)(\"base/BaseTool\"),$=Object(M.importInternal)(\"drawing/drawLinkedTextBox\"),ee=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var r={mixins:[\"enabledOrDisabledBinaryTool\"],name:N.DICOM_SR_DISPLAY_TOOL},a=Object.assign(r,n);return(e=B(this,V(t).call(this,a)))._module=F.a.getModule(U.a),e}var n,r,a;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&W(e,t)}(t,e),n=t,(r=[{key:\"renderToolData\",value:function(e){var t=this,n=e.detail,r=n.element,a=this._module,o=Object(M.getToolState)(r,this.name);if(o)for(var i=a.getters.trackingUniqueIdentifiersForElement(r),c=i.activeIndex,s=i.trackingUniqueIdentifiers,l=s[c],u=o.data.filter((function(e){return s.includes(e.TrackingUniqueIdentifier)})),f=function(e){var r=u[e],a=r.renderableData,o=r.labels,i=r.TrackingUniqueIdentifier===l?M.toolColors.getActiveColor():M.toolColors.getToolColor(),c={color:i,lineWidth:2,handleRadius:6};Object.keys(a).forEach((function(e){var r=a[e];switch(e){case A.POINT:t.renderPoint(r,n,c);break;case A.MULTIPOINT:t.renderMultipoint(r,n,c);break;case A.POLYGON:case A.POLYLINE:t.renderPolyLine(r,n,c);break;case A.CIRCLE:t.renderCircle(r,n,c);break;case A.ELLIPSE:t.renderEllipse(r,n,c)}}));var s=n.element,f=K(n.canvasContext.canvas);if(!r.handles||!r.handles.textBox){var d={active:!1,hasMoved:!0,movesIndependently:!1,drawnIndependently:!0,allowedOutsideImage:!0,hasBoundingBox:!0},p=function(e,t){var n=[];return Object.keys(e).forEach((function(r){var a=e[r];switch(r){case A.POINT:a.forEach((function(e){n=[].concat(Y(n),Y(e));var r=t.image,a=r.rows,o=r.columns/10,i=a/10,c=e[0];n.push({x:c.x+o,y:c.y+i})}));break;case A.MULTIPOINT:case A.POLYLINE:case A.POLYGON:a.forEach((function(e){n=[].concat(Y(n),Y(e))}));break;case A.CIRCLE:a.forEach((function(e){var t=e.center,r=e.radius;n.push({x:t.x+r,y:t.y}),n.push({x:t.x-r,y:t.y}),n.push({x:t.x,y:t.y+r}),n.push({x:t.x,y:t.y-r})}));break;case A.ELLIPSE:a.forEach((function(e){var t=e.corner1,r=e.corner2,a=Math.abs(t.x-r.x)/2,o=Math.abs(t.y-r.y)/2,i={x:(t.x+r.x)/2,y:(t.y+r.y)/2};n.push({x:i.x+a,y:i.y}),n.push({x:i.x-a,y:i.y}),n.push({x:i.x,y:i.y+o}),n.push({x:i.x,y:i.y-o})}))}})),n}(a,n);d.anchorPoints=p;var m={x:Math.max.apply(Math,Y(p.map((function(e){return e.x})))),y:Math.max.apply(Math,Y(p.map((function(e){return e.y}))))};d.x=m.x,d.y=m.y,r.handles={},r.handles.textBox=d}var y=function(e){for(var t=Math.min(e.length,3),n=[],r=0;r<t;r++){var a=e[r];n.push(\"\".concat(ne(a.label)).concat(a.value))}return n}(o);function v(){return r.handles.textBox.anchorPoints}H(f,(function(e){$(e,s,r.handles.textBox,y,r.handles,v,i,2,0,!0)}))},d=0;d<u.length;d++)f(d)}},{key:\"renderPolyLine\",value:function(e,t,n){var r=t.element,a=K(t.canvasContext.canvas);e.forEach((function(e){H(a,(function(t){G(t,r,e[0],e,n)}))}))}},{key:\"renderMultipoint\",value:function(e,t,n){var r=K(t.canvasContext.canvas);e.forEach((function(e){H(r,(function(r){z(r,t,e,n)}))}))}},{key:\"renderPoint\",value:function(e,t,n){var r=t.element,a=t.image,o=a.rows,i=a.columns,c=K(t.canvasContext.canvas),l=n.color,u=n.lineWidth,f=i/10,d=o/10;e.forEach((function(e){var t=e[0];H(c,(function(e){var n=s.a.pixelToCanvas(r,t),a=s.a.pixelToCanvas(r,{x:t.x+f,y:t.y+d});X(e,a,n,l,u,!1)}))}))}},{key:\"renderCircle\",value:function(e,t,n){var r=t.element,a=K(t.canvasContext.canvas);e.forEach((function(e){var t=e.center,o=e.radius;J(a,r,t,o,n)}))}},{key:\"renderEllipse\",value:function(e,t,n){var r=t.element,a=K(t.canvasContext.canvas);e.forEach((function(e){var t=e.corner1,o=e.corner2;Z(a,r,t,o,n,\"pixel\",0)}))}}])&&q(n.prototype,r),a&&q(n,a),t}(Q);var te={\"Short Axis\":\"W \",\"Long Axis\":\"L \",AREA:\"Area \",Length:\"\",CORNERSTONEFREETEXT:\"\"};function ne(e){var t=te[e];return void 0!==t?t:e}var re=function(e){var t=function(e){var t=e;switch(e){case\"Length\":t=\"SRLength\";break;case\"Bidirectional\":t=\"SRBidirectional\";break;case\"ArrowAnnotate\":t=\"SRArrowAnnotate\";break;case\"EllipticalRoi\":t=\"SREllipticalRoi\";break;case\"FreehandRoi\":t=\"SRFreehandRoi\";break;case\"RectangleRoi\":t=\"SRRectangleRoi\"}return t}(\"Wwwc\");F.a.addToolForElement(e,ee),F.a.setToolEnabledForElement(e,N.DICOM_SR_DISPLAY_TOOL),F.a.addToolForElement(e,F.a.LengthTool,{name:\"SRLength\",configuration:{renderDashed:!0}}),F.a.addToolForElement(e,F.a.ArrowAnnotateTool,{name:\"SRArrowAnnotate\",configuration:{renderDashed:!0}}),F.a.addToolForElement(e,F.a.BidirectionalTool,{name:\"SRBidirectional\",configuration:{renderDashed:!0}}),F.a.addToolForElement(e,F.a.EllipticalRoiTool,{name:\"SREllipticalRoi\",configuration:{renderDashed:!0}}),F.a.addToolForElement(e,F.a.RectangleRoiTool,{name:\"SRRectangleRoi\",configuration:{renderDashed:!0}}),F.a.addToolForElement(e,F.a.FreehandRoiTool,{name:\"SRFreehandRoi\",configuration:{renderDashed:!0}}),F.a.setToolActiveForElement(e,\"PanMultiTouch\",{pointers:2}),F.a.setToolActiveForElement(e,\"ZoomTouchPinch\",{}),F.a.setToolActiveForElement(e,t,{mouseButtonMask:1}),F.a.setToolActiveForElement(e,\"Pan\",{mouseButtonMask:4}),F.a.setToolActiveForElement(e,\"Zoom\",{mouseButtonMask:2}),F.a.setToolActiveForElement(e,\"StackScrollMouseWheel\",{})};function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ie=T.a.redux.actions,ce=ie.setViewportActive,se=ie.setViewportSpecificData,le=T.a.measurements.MeasurementHandlers,ue=le.onAdded,fe=le.onRemoved,de=le.onModified,pe={added:ue,removed:fe,modified:C()((function(e){return de(e)}),300)},me=Object(R.b)((function(e,t){var n;e.extensions&&e.extensions.cornerstone&&(n=e.extensions.cornerstone);var r=t.viewportIndex,a=r===e.viewports.activeViewportIndex,o=e.viewports.viewportSpecificData[r]||{},i=!1,c=24;if(o&&o.cine){var s=o.cine;i=!0===s.isPlaying,c=s.cineFrameRate||c}return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(n,!0).forEach((function(t){oe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({isActive:a},n,{isStackPrefetchEnabled:t.hasOwnProperty(\"isStackPrefetchEnabled\")?t.isStackPrefetchEnabled:t.stackPrefetch?t.stackPrefetch.enabled:a,isPlaying:i,frameRate:c})}),(function(e,t){var n=t.viewportIndex;return{setViewportActive:function(){e(ce(n))},setViewportSpecificData:function(t){e(se(n,t))},onElementEnabled:function(t){var r=t.detail.element;Object(L.b)(n,r),e(se(n,{plugin:\"cornerstone\"})),re(r)},onMeasurementsChanged:function(e,t){return pe[t](e)}}}))(k.a),ye=T.a.utils.studyMetadataManager,ve=function(e){var t=e.viewportIndex,n=e.displaySet,r=F.a.getModule(U.a),a=Object(L.a)(t);if(a){var o=n.StudyInstanceUID,i=ye.get(o);if(i){var c=i.getDisplaySets().filter((function(e){return\"SR\"===e.Modality}));if(0!==c.length){var l=c[0].measurements;if(l&&!(l.length<1)){var u=l.filter((function(e){return!0===e.loaded})),f=u[0];if(f){r.setters.trackingUniqueIdentifiersForElement(a,u.map((function(e){return e.TrackingUniqueIdentifier})),f);var d=f.TrackingUniqueIdentifier;r.setters.activeTrackingUniqueIdentifierForElement(a,d),s.a.updateImage(a)}}}}}};function he(e){return(he=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function be(){return(be=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ge(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}function Ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function we(e){return(we=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ee(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function Oe(e,t){return(Oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var xe=T.a.utils.StackManager,Pe=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return r=this,n=!(a=(e=we(t)).call.apply(e,[this].concat(i)))||\"object\"!==he(a)&&\"function\"!=typeof a?Ee(r):a,Se(Ee(n),\"state\",{viewportData:null}),Se(Ee(n),\"getViewportData\",function(){var e,n=(e=regeneratorRuntime.mark((function e(n,r,a,o,i){var c,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.getCornerstoneStack(n,r,a,o,i),c={StudyInstanceUID:r,displaySetInstanceUID:a,stack:s},e.abrupt(\"return\",c);case 3:case\"end\":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){ge(o,r,a,i,c,\"next\",e)}function c(e){ge(o,r,a,i,c,\"throw\",e)}i(void 0)}))});return function(e,t,r,a,o){return n.apply(this,arguments)}}()),n}var n,r,o;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Oe(e,t)}(t,e),n=t,o=[{key:\"init\",value:function(){console.log(\"OHIFCornerstoneViewport init()\")}},{key:\"destroy\",value:function(){console.log(\"OHIFCornerstoneViewport destroy()\"),xe.clearStacks()}},{key:\"getCornerstoneStack\",value:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!e||!e.length)throw new Error(\"Studies not provided.\");if(!t)throw new Error(\"StudyInstanceUID not provided.\");if(!n)throw new Error(\"StudyInstanceUID not provided.\");var o=e.find((function(e){return e.StudyInstanceUID===t}));if(!o)throw new Error(\"Study not found.\");var i=o.displaySets.find((function(e){return e.displaySetInstanceUID===n}));if(!i)throw new Error(\"Display Set not found.\");var c=xe.findOrCreateStack(o,i),l=Object.assign({},c);if(l.currentImageIdIndex=a,r){var u=l.imageIds.findIndex((function(e){return s.a.metaData.get(\"SOPInstanceUID\",e)===r}));u>-1?l.currentImageIdIndex=u:console.warn(\"SOPInstanceUID provided was not found in specified DisplaySet\")}return l}}],(r=[{key:\"setStateFromProps\",value:function(){var e=this,t=this.props.viewportData,n=t.studies,r=t.displaySet,a=r.StudyInstanceUID,o=r.displaySetInstanceUID,i=r.sopClassUIDs,c=r.SOPInstanceUID,s=r.frameIndex;a&&o&&(i&&i.length>1&&console.warn(\"More than one SOPClassUID in the same series is not yet supported.\"),this.getViewportData(n,a,o,c,s).then((function(t){e.setState({viewportData:t})})))}},{key:\"componentDidMount\",value:function(){this.setStateFromProps()}},{key:\"componentDidUpdate\",value:function(e){var t=this.props.viewportData.displaySet,n=e.viewportData.displaySet;if(t.displaySetInstanceUID!==n.displaySetInstanceUID||t.SOPInstanceUID!==n.SOPInstanceUID||t.frameIndex!==n.frameIndex){var r=this.props.viewportIndex;ve({displaySet:t,viewportIndex:r}),this.setStateFromProps()}}},{key:\"render\",value:function(){var e=this,t=null;if(!this.state.viewportData)return null;var n=this.props.viewportIndex,r=this.props.viewportData.displaySet.inconsistencyWarnings,o=this.state.viewportData.stack,i=o.imageIds,c=o.currentImageIdIndex;return this.props.children&&this.props.children.length&&(t=this.props.children.map((function(t,n){return t&&a.a.cloneElement(t,{viewportIndex:e.props.viewportIndex,key:n})}))),a.a.createElement(a.a.Fragment,null,a.a.createElement(me,be({viewportIndex:n,imageIds:i,imageIdIndex:c,onNewImageDebounced:function(t){var r=t.currentImageIdIndex,a=t.sopInstanceUid,o=e.props.viewportData.displaySet.StudyInstanceUID;r>=0&&e.props.onNewImage({StudyInstanceUID:o,SOPInstanceUID:a,frameIndex:r,activeViewportIndex:n})},onNewImageDebounceTime:300,viewportOverlayComponent:function(e){return a.a.createElement(P,be({},e,{inconsistencyWarnings:r}))},stackPrefetch:this.props.stackPrefetch,isStackPrefetchEnabled:this.props.isStackPrefetchEnabled},this.props.customProps)),t)}}])&&Ie(n.prototype,r),o&&Ie(n,o),t}(r.Component);Se(Pe,\"defaultProps\",{customProps:{},isStackPrefetchEnabled:!0}),Se(Pe,\"propTypes\",{studies:i.a.object,displaySet:i.a.object,viewportIndex:i.a.number,children:i.a.node,customProps:i.a.object,stackPrefetch:i.a.object,isStackPrefetchEnabled:i.a.bool}),Se(Pe,\"id\",\"OHIFCornerstoneViewport\");t.default=Pe}}]);","extractedComments":[]}