{"map":"{\"version\":3,\"sources\":[\"1.bundle.b03bf7dbf8e611fce6a5.js\"],\"names\":[\"window\",\"push\",\"1395\",\"module\",\"exports\",\"__webpack_require__\",\"arrayMap\",\"object\",\"props\",\"key\",\"1398\",\"__webpack_exports__\",\"es\",\"react\",\"react_default\",\"n\",\"metadata\",\"src_studies\",\"utils\",\"log\",\"usePrevious\",\"ConnectedViewer\",\"prop_types\",\"prop_types_default\",\"App\",\"src\",\"AppContext\",\"NotFound\",\"filesToStudies\",\"asyncGeneratorStep\",\"gen\",\"resolve\",\"reject\",\"_next\",\"_throw\",\"arg\",\"info\",\"value\",\"error\",\"done\",\"Promise\",\"then\",\"_asyncToGenerator\",\"fn\",\"self\",\"this\",\"args\",\"arguments\",\"apply\",\"err\",\"undefined\",\"_slicedToArray\",\"arr\",\"i\",\"Array\",\"isArray\",\"_arrayWithHoles\",\"Symbol\",\"iterator\",\"Object\",\"prototype\",\"toString\",\"call\",\"_arr\",\"_n\",\"_d\",\"_e\",\"_s\",\"_i\",\"next\",\"length\",\"_iterableToArrayLimit\",\"TypeError\",\"_nonIterableRest\",\"_toConsumableArray\",\"arr2\",\"_arrayWithoutHoles\",\"iter\",\"from\",\"_iterableToArray\",\"_nonIterableSpread\",\"OHIFStudyMetadata\",\"OHIFSeriesMetadata\",\"retrieveStudiesMetadata\",\"deleteStudyMetadataPromise\",\"studyMetadataManager\",\"makeCancelable\",\"_promoteList\",\"study\",\"studyMetadata\",\"filters\",\"isFilterStrategy\",\"promoted\",\"_promoteStudyDisplaySet\",\"list\",\"values\",\"searchMethod\",\"listCopy\",\"response\",\"promotedCount\",\"arrayValues\",\"keys\",\"seriesInstanceUID\",\"promotedResponse\",\"getDisplaySets\",\"valueToCompare\",\"displaySet\",\"SeriesInstanceUID\",\"split\",\"forEach\",\"index\",\"findIndex\",\"bind\",\"itemToPromote\",\"splice\",\"data\",\"concat\",\"displaySets\",\"_isQueryParamApplied\",\"applied\",\"seriesInstanceUIDs\",\"validateFilterApplied\",\"arrayToInspect\",\"every\",\"item\",\"some\",\"seriesInstanceUIDStr\",\"validatePromoteApplied\",\"isValid\",\"resultSeries\",\"_study$series\",\"series\",\"_study$displaySets\",\"validateMethod\",\"_showUserMessage\",\"queryParamApplied\",\"message\",\"dialog\",\"_dialog$show\",\"show\",\"showUserMessage\",\"ViewerRetrieveStudyData_addSeriesToStudy\",\"sopClassHandlerModules\",\"modules\",\"getData\",\"seriesMetadata\",\"getSeriesByUID\",\"updateSeries\",\"addSeries\",\"createAndAddDisplaySetsForSeries\",\"derivedDisplaySets\",\"getDerivedDatasets\",\"Modality\",\"_updateStudyMetadataManager\",\"StudyInstanceUID\",\"get\",\"add\",\"ViewerRetrieveStudyData_updateStudyDisplaySets\",\"createDisplaySets\",\"_addDerivedDisplaySets\",\"_thinStudyData\",\"map\",\"ViewerRetrieveStudyData\",\"_ref\",\"cancelableSeriesPromises\",\"cancelableStudiesPromises\",\"server\",\"studyInstanceUIDs\",\"clearViewportSpecificData\",\"setStudyData\",\"user\",\"_useState2\",\"isRendered\",\"setIsRendered\",\"_useState4\",\"setError\",\"_useState6\",\"reload\",\"setReload\",\"_useState8\",\"studies\",\"setStudies\",\"_useState10\",\"isStudyLoaded\",\"setIsStudyLoaded\",\"snackbarContext\",\"_useContext$appConfig\",\"appConfig\",\"_appConfig$filterQuer\",\"filterQueryParam\",\"maxConcurrentMetadataRequests\",\"processStudies\",\"studiesData\",\"loadRemaining\",\"_studies\",\"loadRemainingSeries\",\"result\",\"isCanceled\",\"isQueryParamApplied\",\"studyDidLoad\",\"catch\",\"finally\",\"forceRerender\",\"_ref2\",\"regeneratorRuntime\",\"mark\",\"_callee2\",\"_studyMetadata$getDat\",\"seriesLoader\",\"loadNextSeries\",\"concurrentRequestsAllowed\",\"promises\",\"remainingPromises\",\"wrap\",\"_context2\",\"prev\",\"abrupt\",\"_ref3\",\"_callee\",\"_context\",\"hasNext\",\"sent\",\"stop\",\"getSeriesCount\",\"fill\",\"all\",\"_x\",\"_x2\",\"loadStudies\",\"_ref4\",\"_callee5\",\"studiesAccessControl\",\"studiesMap\",\"isFirstTime\",\"server_url\",\"url\",\"req\",\"retrieveParams\",\"_server_url\",\"_url\",\"_req\",\"_context5\",\"localStorage\",\"getItem\",\"JSON\",\"parse\",\"URL\",\"email\",\"XMLHttpRequest\",\"open\",\"responseType\",\"setRequestHeader\",\"send\",\"onload\",\"zip\",\"flist\",\"blob\",\"loadAsync\",\"_ref5\",\"_callee3\",\"fileName\",\"fileBlob\",\"file\",\"_context3\",\"t0\",\"files\",\"t1\",\"async\",\"File\",\"type\",\"splitQueryParameterCalls\",\"enableGoogleCloudAdapter\",\"result_measurements\",\"filter\",\"el\",\"setItem\",\"stringify\",\"_x3\",\"_ref6\",\"_callee4\",\"_context4\",\"_x4\",\"purgeCancellablePromises\",\"_studyInstanceUIDs\",\"cancel\",\"_studyInstanceUIDs2\",\"remove\",\"prevStudyInstanceUIDs\",\"e\",\"includes\",\"purge\",\"content\",\"a\",\"createElement\",\"style\",\"marginLeft\",\"propTypes\",\"array\",\"isRequired\",\"func\",\"connectedComponents_ViewerRetrieveStudyData\",\"state\",\"auth\",\"_OHIF$redux$actions\",\"redux\",\"actions\",\"_clearViewportSpecificData\",\"_setStudyData\",\"isActive\",\"active\",\"ConnectedViewerRetrieveStudyData_ConnectedViewerRetrieveStudyData\",\"ownProps\",\"activeServer\",\"servers\",\"find\",\"dispatch\",\"1399\",\"d\",\"react__WEBPACK_IMPORTED_MODULE_0__\",\"ref\",\"current\",\"1400\",\"baseValues\"],\"mappings\":\"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\"}","code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{1395:function(e,t,r){var n=r(399);e.exports=function(e,t){return n(t,(function(t){return e[t]}))}},1398:function(e,t,r){\"use strict\";var n=r(17),a=r(0),s=r.n(a),i=r(127),o=r(244),c=r(192),u=r(9),l=r(1399),d=r(1397),f=r(1),p=r.n(f),y=r(252),v=r(7),S=r(108),m=r(409),g=r(1403);function h(e,t,r,n,a,s,i){try{var o=e[s](i),c=o.value}catch(e){return void r(e)}o.done?t(c):Promise.resolve(c).then(n,a)}function I(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var s=e.apply(t,r);function i(e){h(s,n,a,i,o,\"next\",e)}function o(e){h(s,n,a,i,o,\"throw\",e)}i(void 0)}))}}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||\"[object Arguments]\"===Object.prototype.toString.call(e)))return;var r=[],n=!0,a=!1,s=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,s=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw s}}return r}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}()}function D(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||\"[object Arguments]\"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance\")}()}var w=i.a.OHIFStudyMetadata,R=i.a.OHIFSeriesMetadata,U=o.a.retrieveStudiesMetadata,O=o.a.deleteStudyMetadataPromise,x=c.a.studyMetadataManager,j=c.a.makeCancelable,C=function(e,t,r,n){var a=!1;return n||(a=A(e,t,r)),a},A=function(e,t,r){var n,a,s,i,o,c,u,l=!1;if(Object.keys(r).length>0){var d=r.seriesInstanceUID,f=(n=t.getDisplaySets(),a=d,s=function(e,t){return t.SeriesInstanceUID===e},i=D(n),o=[],c=0,(u=a.split(\",\")).forEach((function(e){var t=i.findIndex(s.bind(void 0,e));if(t>=0){var r=b(i.splice(t,1),1)[0];o[c]=r,c++}})),{promoted:c===u.length,data:[].concat(o,D(i))});e.displaySets=f.data,l=f.promoted}return l},M=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,n=t.seriesInstanceUID,a=!0;if(!n)return a;var s=n.split(\",\"),i=function(){if(f.length===s.length)return f.every((function(e){return s.some((function(t){return t===e.SeriesInstanceUID}))}))},o=function(){for(var e=!0,t=0;t<s.length;t++){var r=s[t],n=f[t];if(!n||n.SeriesInstanceUID!==r){e=!1;break}}return e},c=e.series,u=void 0===c?[]:c,l=e.displaySets,d=void 0===l?[]:l,f=r?u:d,p=r?i:o;return a=!!f&&p()},k=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e){var n=r.show,a=void 0===n?function(){}:n;a({message:t})}},E=function(e,t){var r=y.c.modules.sopClassHandlerModule,n=e.getData(),a=new R(t,n);e.getSeriesByUID(t.SeriesInstanceUID)?e.updateSeries(t.SeriesInstanceUID,a):e.addSeries(a),e.createAndAddDisplaySetsForSeries(r,a),n.displaySets=e.getDisplaySets(),n.derivedDisplaySets=e.getDerivedDatasets({Modality:t.Modality}),q(n,e)},q=function(e,t){var r=e.StudyInstanceUID;x.get(r)||x.add(t)},L=function(e,t){var r=y.c.modules.sopClassHandlerModule;e.displaySets||(e.displaySets=t.createDisplaySets(r)),e.derivedDisplaySets&&t._addDerivedDisplaySets(e.derivedDisplaySets)},F=function(e){return{StudyInstanceUID:e.StudyInstanceUID,series:e.series.map((function(e){return{SeriesInstanceUID:e.SeriesInstanceUID}}))}};function P(e){var t,n,i=e.server,o=e.studyInstanceUIDs,c=e.seriesInstanceUIDs,f=e.clearViewportSpecificData,p=e.setStudyData,y=e.user,h=b(Object(a.useState)(!1),2),R=h[0],A=h[1],P=b(Object(a.useState)(!1),2),T=P[0],G=P[1],H=b(Object(a.useState)(!1),2),J=H[0],N=H[1],Q=b(Object(a.useState)([]),2),V=Q[0],_=Q[1],z=b(Object(a.useState)(!1),2),W=z[0],X=z[1],B=Object(v.I)(),K=Object(a.useContext)(S.c).appConfig,Y=void 0===K?{}:K,Z=Y.filterQueryParam,$=void 0!==Z&&Z,ee=Y.maxConcurrentMetadataRequests,te=function(e,r,n){if(Array.isArray(e)&&e.length>0){var a=e.map((function(e){p(e.StudyInstanceUID,F(e));var a=new w(e,e.StudyInstanceUID);return L(e,a),q(e,a),t[e.StudyInstanceUID]=j(ne(a,n)).then((function(t){t&&!t.isCanceled&&function(e,t,r){C(e,t,r,$)&&f(0);var n=M(e,r,$);k(n,\"Query parameters were not totally applied. It might be using original series list for given study.\",B),_([].concat(D(V),[e]))}(e,a,r)})).catch((function(e){e&&!e.isCanceled&&(G(e),u.a.error(e))})).finally((function(){X(!0)})),e}));_(a)}},re=function(){return _((function(e){return D(e)}))},ne=function(){var e=I(regeneratorRuntime.mark((function e(t,r){var n,a,s,i,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.getData(),a=n.seriesLoader){e.next=3;break}return e.abrupt(\"return\");case 3:return s=function(){var e=I(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.hasNext()){e.next=2;break}return e.abrupt(\"return\");case 2:return e.next=4,a.next();case 4:if(n=e.sent,r){e.next=11;break}return\"SEG\"!==n.Modality&&\"SR\"!==n.Modality||E(t,n),re(),e.abrupt(\"return\",s());case 11:return E(t,n),re(),e.abrupt(\"return\",s());case 14:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=ee||t.getSeriesCount(),o=Array(i).fill(null).map(s),e.next=8,Promise.all(o);case 8:return c=e.sent,X(!0),e.abrupt(\"return\",c);case 11:case\"end\":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),ae=function(){var e=I(regeneratorRuntime.mark((function e(){var t,a,s,l,d,f,p,v,S,m,h,b;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t=localStorage.getItem(\"studyAccessControl\"),a=JSON.parse(t),0===(s=a[o[0]])?(l=new URL(\"http://localhost/\"),d=new URL(\"api/image_decrypt/?hasPerm=true&study=\".concat(o[0],\"&user=\").concat(y.email),l),(f=new XMLHttpRequest).open(\"GET\",d,!0),f.responseType=\"blob\",f.setRequestHeader(\"Authorization\",\"JWT \".concat(localStorage.getItem(\"access\"))),f.send(),f.onload=function(){var e=r(778)(),t=[],s=f.response;e.loadAsync(s).then(function(){var e=I(regeneratorRuntime.mark((function e(r){var s,l,d,f,p,y,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=regeneratorRuntime.keys(r.files);case 1:if((e.t1=e.t0()).done){e.next=10;break}return s=e.t1.value,e.next=5,r.file(s).async(\"blob\");case 5:l=e.sent,d=new File([l],s,{type:\"application/dcm\"}),t.push(d),e.next=1;break;case 10:return e.next=12,Object(g.a)(t);case 12:f=e.sent,p={},y=c&&c[0],v=[i,o],y&&(p.seriesInstanceUID=y,$&&v.push(p)),(Y.splitQueryParameterCalls||Y.enableGoogleCloudAdapter)&&v.push(!0),n[o]=j(U.apply(void 0,v)).then((function(e){if(e&&!e.isCanceled){A(!0);var t=e[0].series.filter((function(e){return\"SR\"===e.Modality||\"SEG\"===e.Modality}));f[0].series=f[0].series.concat(t),f[0].seriesLoader=e[0].seriesLoader,f[0].seriesMap=e[0].seriesMap,f[0].wadoRoot=e[0].wadoRoot,f[0].wadoUriRoot=e[0].wadoUriRoot,f[0].qidoRoot=e[0].qidoRoots,f[0].FrameOfReferenceUID=e[0].FrameOfReferenceUID,f[0].ReferencedSeriesSequence=e[0].ReferencedSeriesSequence,te(f,p,!0)}})).catch((function(e){e&&!e.isCanceled&&(G(e),u.a.error(e))})),a[o]=1,localStorage.setItem(\"studyAccessControl\",JSON.stringify(a));case 21:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}):1===s?(N(!1),p={},v=c&&c[0],S=[i,o],v&&(p.seriesInstanceUID=v,$&&S.push(p)),(Y.splitQueryParameterCalls||Y.enableGoogleCloudAdapter)&&S.push(!0),n[o]=j(U.apply(void 0,S)).then((function(e){e&&!e.isCanceled&&(A(!0),te(e,p,!0))})).catch((function(e){e&&!e.isCanceled&&(G(e),u.a.error(e))}))):(m=new URL(\"http://localhost/\"),h=new URL(\"api/image_decrypt/?hasPerm=false&study=\".concat(o[0],\"&user=\").concat(y.email),m),(b=new XMLHttpRequest).open(\"GET\",h,!0),b.responseType=\"blob\",b.setRequestHeader(\"Authorization\",\"JWT \".concat(localStorage.getItem(\"access\"))),b.send(),b.onload=function(){var e=r(778)(),t=[],s=b.response;e.loadAsync(s).then(function(){var e=I(regeneratorRuntime.mark((function e(r){var s,l,d,f,p,y,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=regeneratorRuntime.keys(r.files);case 1:if((e.t1=e.t0()).done){e.next=10;break}return s=e.t1.value,e.next=5,r.file(s).async(\"blob\");case 5:l=e.sent,d=new File([l],s,{type:\"application/dcm\"}),t.push(d),e.next=1;break;case 10:return e.next=12,Object(g.a)(t);case 12:f=e.sent,p={},y=c&&c[0],v=[i,o],y&&(p.seriesInstanceUID=y,$&&v.push(p)),(Y.splitQueryParameterCalls||Y.enableGoogleCloudAdapter)&&v.push(!0),n[o]=j(U.apply(void 0,v)).then((function(e){if(e&&!e.isCanceled){A(!0);var t=e[0].series.filter((function(e){return\"SR\"===e.Modality||\"SEG\"===e.Modality}));f[0].series=f[0].series.concat(t),f[0].seriesLoader=e[0].seriesLoader,f[0].wadoRoot=e[0].wadoRoot,f[0].wadoUriRoot=e[0].wadoUriRoot,f[0].qidoRoot=e[0].qidoRoots,f[0].FrameOfReferenceUID=e[0].FrameOfReferenceUID,f[0].ReferencedSeriesSequence=e[0].ReferencedSeriesSequence,te(f,p,!1)}})).catch((function(e){e&&!e.isCanceled&&(G(e),u.a.error(e))})),a[o]=-1,localStorage.setItem(\"studyAccessControl\",JSON.stringify(a));case 21:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})}catch(e){e&&(G(e),u.a.error(e))}case 1:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),se=Object(a.useCallback)((function(){for(var e in n)\"cancel\"in n[e]&&n[e].cancel();for(var r in t)\"cancel\"in t[r]&&(t[r].cancel(),O(r),x.remove(r))}),[t,n]),ie=Object(l.a)(o);if(Object(a.useEffect)((function(){!(ie&&ie.every((function(e){return o.includes(e)})))&&(x.purge(),se())}),[ie,se,o]),Object(a.useEffect)((function(){return t={},n={},ae(),function(){se()}}),[]),T){var oe=JSON.stringify(T);return oe.includes(\"404\")||oe.includes(\"NOT_FOUND\")?s.a.createElement(m.a,null):s.a.createElement(m.a,{message:\"Failed to retrieve study data\"})}return s.a.createElement(a.Fragment,null,R?s.a.createElement(d.a,{studies:V,isStudyLoaded:W,studyInstanceUIDs:V&&V.map((function(e){return e.StudyInstanceUID})),reload:J}):s.a.createElement(a.Fragment,null,s.a.createElement(\"h3\",{style:{marginLeft:\"20px\"}},\"Loading...\")))}P.propTypes={studyInstanceUIDs:p.a.array.isRequired,seriesInstanceUIDs:p.a.array,server:p.a.object,clearViewportSpecificData:p.a.func.isRequired,setStudyData:p.a.func.isRequired,user:p.a.object};var T=Object(n.b)((function(e){return{user:e.auth.user}}),null)(P),G=r(20).a.redux.actions,H=G.clearViewportSpecificData,J=G.setStudyData,N=function(e){return!0===e.active},Q=Object(n.b)((function(e,t){var r=e.servers.servers.find(N);return{server:t.server||r}}),(function(e){return{setStudyData:function(t,r){e(J(t,r))},clearViewportSpecificData:function(){e(H())}}}))(T);t.a=Q},1399:function(e,t,r){\"use strict\";r.d(t,\"a\",(function(){return a}));var n=r(0);function a(e){var t=Object(n.useRef)();return Object(n.useEffect)((function(){t.current=e}),[e]),t.current}},1400:function(e,t,r){var n=r(1395),a=r(204);e.exports=function(e){return null==e?[]:n(e,a(e))}}}]);","extractedComments":[]}